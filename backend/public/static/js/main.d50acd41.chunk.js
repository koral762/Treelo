(this.webpackJsonpsprint4=this.webpackJsonpsprint4||[]).push([[0],{22:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(3),a=n.n(r),s=n(9),c=n(7),o=n(53),i=n(56),l=n(41),d={getBoardById:function(e){return p.apply(this,arguments)},addNewBoard:function(e,t){return j.apply(this,arguments)},updateBoard:function(e){return h.apply(this,arguments)},createActivity:function(e){var t={id:l.a.makeId(),txt:e.txt,commentTxt:e.commentTxt,createdAt:Date.now(),byMember:{}};e.card&&(t.card={id:e.card.id,title:e.card.title});e.group||(t.group=Object(s.a)({},e.group));return t},getCardTitleById:function(e,t){var n;return t.groups.forEach((function(t){return t.cards.forEach((function(t){t.id===e&&(n=t.title)}))})),n},query:function(){return b.apply(this,arguments)},createImage:function(e){return{type:"img",id:l.a.makeId(),src:e,title:"Image",createdAt:Date.now()}},add:function(e){return u.apply(this,arguments)}};function u(){return(u=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("board",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("board/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("board");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.a.emit("updated board",t),e.next=3,o.a.put("board/".concat(t._id),t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(c.a)(a.a.mark((function e(t,n){var r,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={title:t,isArchived:!1,createdAt:Date.now,description:"Board's description",labels:[{id:"l101",name:"Default",color:"green"},{id:"l102",name:"Default",color:"yellow"},{id:"l103",name:"Default",color:"orange"},{id:"l104",name:"Default",color:"red"},{id:"l105",name:"Default",color:"purple"},{id:"l106",name:"Default",color:"blue"}],activities:[],createdBy:{_id:"u2345",fullName:"Gust",imgUrl:"http://some-img"},style:{fontClr:"#f9f9f9",bgImg:null,boardColor:n},members:[],groups:[{id:l.a.makeId(),title:"Add New Card Title",description:"description",archivedAt:!1,labels:[],cards:[]}]},e.next=3,o.a.post("board",r);case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},240:function(e,t){},243:function(e,t,n){"use strict";n.r(t),n.d(t,"cardService",(function(){return o}));var r=n(3),a=n.n(r),s=n(7),c=n(41),o=(n(22),{addCard:function(e,t,n){return i.apply(this,arguments)}});function i(){return(i=Object(s.a)(a.a.mark((function e(t,n,r){var s,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("groupId",r),s=JSON.parse(JSON.stringify(t)),o={id:c.a.makeId(),title:n,description:"",archivedAt:null,members:[],labels:[],createdAt:Date.now(),dueDate:null,attachments:null,timeAnalysis:{timeInGroupsMap:{},currGroup:{groupId:r,enteredAt:Date.now()}},byMember:{}},s.groups.map((function(e){return e.id===r?(e.cards.push(o),e):e})),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},252:function(e,t,n){},253:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(23),c=n.n(s),o=n(33),i=n(15),l=n(45),d=n(9),u=n(10),p=n(11),b=n(13),h=n(12),j=n(25),f=n(147),m=n.n(f),v=n(148),g=n.n(v),O=n(149),x=n.n(O),y=n.p+"static/media/homenew.eed7a37b.jpg",w=n.p+"static/media/logo.5e046566.png",C=n(1);var k=n(3),S=n.n(k),N=n(7),D=n(22),A=n(56),E=n(41),B=n(243).cardService;function I(e){return function(){var t=Object(N.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.getBoardById(e);case 3:r=t.sent,n({type:"SET_BOARD",board:r}),A.a.emit("join board",e),A.a.off("updated board"),A.a.on("updated board",(function(e){n({type:"SET_BOARD",board:e})})),t.next=14;break;case 10:throw t.prev=10,t.t0=t.catch(0),console.log("boardStore: Error in loadBoard",t.t0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}function M(e){return function(){var t=Object(N.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"SET_STYLE",style:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function T(e){return function(){var t=Object(N.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=JSON.parse(JSON.stringify(e)),n({type:"SET_BOARD",board:r}),t.next=5,D.a.updateBoard(r);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("error updating board",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function U(e,t){return function(){var n=Object(N.a)(S.a.mark((function n(r){var a,s;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=JSON.parse(JSON.stringify(e)),s=a.groups.findIndex((function(e){return t===e.id})),a.groups.splice(s,1),r({type:"SET_BOARD",board:a}),n.next=7,D.a.updateBoard(a);case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log("error deleting card",n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}function L(e,t,n){return function(){var r=Object(N.a)(S.a.mark((function r(a){var s,c,o;return S.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s=JSON.parse(JSON.stringify(e)),c=s.groups.findIndex((function(e){return e.cards.find((function(e){return e.id===t.id}))})),o=s.groups[c].cards.findIndex((function(e){return e.id===t.id})),s.groups[c].cards[o]=t,n&&(s.activities||(s.activities=[]),s.activities.unshift(n)),a({type:"SET_BOARD",board:s}),r.next=9,D.a.updateBoard(s);case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),console.log("error updating card",r.t0);case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e){return r.apply(this,arguments)}}()}function F(e,t){return function(){var n=Object(N.a)(S.a.mark((function n(r){var a;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,(a=JSON.parse(JSON.stringify(e))).activities||(a.activities=[]),a.activities.unshift(t),r({type:"SET_BOARD",board:a}),n.next=7,D.a.updateBoard(a);case 7:console.log(a),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log("error updating board",n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}var P=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={newGroupTitle:""},e.handleChange=function(t){var n=t.target.value;e.setState({newGroupTitle:n})},e.onSubmit=function(t){t.preventDefault(),e.state.newGroupTitle&&(e.props.onAddNewGroup(e.props.board,e.state.newGroupTitle),e.setState({newGroupTitle:""}))},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.setState({newGroupTitle:""})}},{key:"render",value:function(){var e=this;return Object(C.jsx)("div",{className:"new-group-form",children:Object(C.jsxs)("form",{onBlur:this.setNotEditing,onSubmit:this.onSubmit,children:[Object(C.jsx)("input",{onBlur:function(){return e.props.closeNewGroup()},placeholder:"Enter list title",type:"text",autoFocus:!0,onChange:this.handleChange,value:this.state.newGroupTitle?this.state.newGroupTitle:""}),Object(C.jsxs)("div",{className:"save-btn-container",children:[Object(C.jsx)("button",{className:"save-btn",onMouseDown:this.onSubmit,children:"Add List"}),Object(C.jsx)("button",{onClick:function(){return e.props.closeNewGroup()},children:"close"})]})]})})}}]),n}(r.Component),R={onAddNewGroup:function(e,t){return function(){var n=Object(N.a)(S.a.mark((function n(r){var a,s;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=JSON.parse(JSON.stringify(e)),s={id:E.a.makeId(),title:t,cards:[],archivedAt:!1,style:{}},a.groups.push(s),r({type:"SET_BOARD",board:a}),n.next=7,D.a.updateBoard(a);case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log("error adding new group",n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}},_=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),R)(P),G=n(52),J=n(254),V=n(92),z=n.n(V),W=n(153),H=n.n(W),K=n(91),Y=n.n(K),q=n(152),Z=n.n(q);function X(e){var t=e.label,n=e.action,r=e.setLabelEditId,s=e.onRemoveLabel;e.card;return Object(C.jsxs)("div",{className:"label-edit-modal",children:[Object(C.jsx)(J.a,{className:"close-modal",size:"small",onClick:function(){return r()},children:Object(C.jsx)(Z.a,{})}),Object(C.jsxs)("form",{onSubmit:function(e){return n(e,t)},children:[Object(C.jsx)("input",{type:"text",name:"labelName",defaultValue:t?t.name:"",placeholder:"Enter label's name..."}),Object(C.jsx)("div",{className:"color-palette color-picker-container",children:["green","yellow","orange","red","purple","blue","pink"].map((function(e){return Object(C.jsxs)(a.a.Fragment,{children:[Object(C.jsx)("input",{required:!0,hidden:!0,type:"radio",id:e,name:"newColor",value:e,defaultChecked:t?e===t.color:"pink"}),Object(C.jsx)("label",{htmlFor:e,children:Object(C.jsx)("div",{className:"color-picker ".concat(e)})})]},e)}))}),Object(C.jsxs)("div",{className:"save-cancel-btns",children:[Object(C.jsx)("button",{className:"save-btn",children:"Save"}),t&&Object(C.jsx)("button",{className:"cancel-btn",onClick:function(){return s(t.id)},children:"Delete"})]})]})]})}var Q=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={labelEditId:null},e.setLabelEditId=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e.setState({labelEditId:t})},e.onAddLabel=function(t){t.preventDefault();var n={name:t.target.labelName.value,color:t.target.newColor.value};e.props.addLabel(e.props.board,n),e.setLabelEditId()},e.onEditLabel=function(t,n){t.preventDefault();var r=t.target.labelName.value,a=t.target.newColor.value,s=Object(d.a)(Object(d.a)({},n),{},{name:r,color:a});e.props.updateLabel(e.props.board,s),e.setLabelEditId()},e.onRemoveLabel=function(t){e.props.removeLabel(e.props.board,t),e.setLabelEditId()},e.onToggleLabelToCard=function(t,n){var r=t.labels.findIndex((function(e){return e.id===n}));t.labels=-1===r?[].concat(Object(l.a)(t.labels),[{id:n}]):[].concat(Object(l.a)(t.labels.slice(0,r)),Object(l.a)(t.labels.slice(r+1)));var a=e.props.createActivity("updated a label");e.props.updateCard(e.props.board,t,a)},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.board,r=t.card;return Object(C.jsx)("div",{className:this.props.isShownOnBoard?"card-preview-label-palette":"card-details-label-palette",style:this.props.style,children:Object(C.jsx)("ul",{className:"clean-list",children:Object(C.jsxs)("div",{className:"labels-modal flex column",children:[Object(C.jsx)("span",{className:"labels-modal-header",children:"Labels"}),n.labels&&n.labels.map((function(t){return Object(C.jsx)("li",{className:"label",children:Object(C.jsxs)("div",{className:"flex justify-space-between label",children:[Object(C.jsxs)("div",{className:"label-color ".concat(t.color," flex justify-space-between"),onClick:r?function(){return e.onToggleLabelToCard(r,t.id)}:function(){return e.setLabelEditId(e.state.labelEditId===t.id?null:t.id)},children:[Object(C.jsx)("span",{children:t.name}),r&&r.labels.find((function(e){return e.id===t.id}))&&Object(C.jsx)(Y.a,{className:"tick-symbol",fontSize:"small"})]}),Object(C.jsx)(J.a,{className:"edit-label-btn",onClick:function(){return e.setLabelEditId(e.state.labelEditId===t.id?null:t.id)},children:Object(C.jsx)(z.a,{fontSize:"small"})}),!r&&Object(C.jsx)(J.a,{className:"remove-label-btn",onClick:function(){return e.onRemoveLabel(t.id)},children:Object(C.jsx)(H.a,{fontSize:"small"})}),e.state.labelEditId===t.id&&Object(C.jsx)(X,{label:t,action:e.onEditLabel,onRemoveLabel:e.onRemoveLabel,setLabelEditId:e.setLabelEditId})]})},t.id)})),Object(C.jsxs)("li",{className:"label add-label",children:[Object(C.jsx)("div",{className:"label-color add-label",onClick:function(){return e.setLabelEditId("addLabel"===e.state.labelEditId?null:"addLabel")},children:Object(C.jsx)("div",{className:"new-label-button btn",children:"Create a new label"})}),"addLabel"===this.state.labelEditId&&Object(C.jsx)(X,{action:this.onAddLabel,setLabelEditId:this.setLabelEditId})]})]})})})}}]),n}(r.Component),$={addLabel:function(e,t){return function(){var n=Object(N.a)(S.a.mark((function n(r){var a;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=JSON.parse(JSON.stringify(e)),t.id=E.a.makeId(),a.labels||(a.labels=[]),a.labels.push(t),r({type:"SET_BOARD",board:a}),n.next=8,D.a.updateBoard(a);case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log("error adding label",n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},updateLabel:function(e,t){return function(){var n=Object(N.a)(S.a.mark((function n(r){var a;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,(a=JSON.parse(JSON.stringify(e))).labels=a.labels.map((function(e){return e.id===t.id&&(e=t),e})),r({type:"SET_BOARD",board:a}),n.next=6,D.a.updateBoard(a);case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log("error updating label",n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},removeLabel:function(e,t){return function(){var n=Object(N.a)(S.a.mark((function n(r){var a,s;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=JSON.parse(JSON.stringify(e)),s=a.labels.findIndex((function(e){return e.id===t})),a.labels.splice(s,1),r({type:"SET_BOARD",board:a}),n.next=7,D.a.updateBoard(a);case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log("error removing label",n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},updateCard:L},ee=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),$)(Q),te=n(318),ne=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={imgUrl:null},e.testImage=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,a=!1,s=new Image;s.onerror=s.onabort=function(){a||(clearTimeout(n),t(e,"error"))},s.onload=function(){a||(clearTimeout(n),t(e,"success"))},s.src=e,n=setTimeout((function(){a=!0,s.src="//!!!!/test.jpg",t(e,"timeout")}),r)},e.setImgResult=function(t,n){"success"===n&&e.setState({imgUrl:t})},e.getStyle=function(){return e.state.imgUrl?{backgroundImage:"url(".concat(e.props.imgUrl,")")}:{}},e.getName=function(){return e.props.name?e.props.name:""},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.testImage(this.props.imgUrl,this.setImgResult)}},{key:"getInitials",value:function(e){if(e){var t=e.split(" "),n=t[0].charAt(0).toUpperCase(),r="";return t.length>1&&(r=t[1].charAt(0).toUpperCase()),n+r}}},{key:"render",value:function(){var e="member-preview"+(this.props.showBig?" member-preview-big":"");return Object(C.jsx)(te.a,{title:this.getName(),children:Object(C.jsx)("div",{className:e,style:this.getStyle(),children:this.state.imgUrl?Object(C.jsx)(a.a.Fragment,{}):this.getInitials(this.props.name)})})}}]),n}(r.Component),re=n(302),ae={load:function(e){return JSON.parse(localStorage.getItem(e))},save:function(e,t){localStorage.setItem(e,JSON.stringify(t))},clear:function(e){localStorage.clear(e)}};n(53);var se=[{_id:"1",email:"miri@gmail.com",username:"miri",password:"miri123",imgUrl:"img.png"}],ce={login:function(e){return oe.apply(this,arguments)},logout:function(){return le.apply(this,arguments)},signup:function(e){return ie.apply(this,arguments)},getLoggedinUser:ue,getUsers:function(){return pe.apply(this,arguments)},remove:function(e){return be.apply(this,arguments)},update:function(e){return he.apply(this,arguments)}};function oe(){return(oe=Object(N.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=se.find((function(e){return e.username===t.username})))){e.next=4;break}return e.abrupt("return",de(n));case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function ie(){return(ie=Object(N.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={},e.abrupt("return",de(n));case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function le(){return(le=Object(N.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,sessionStorage.clear(),e.abrupt("return");case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function de(e){return sessionStorage.setItem("loggedinUser",JSON.stringify(e)),e}function ue(){return JSON.parse(sessionStorage.getItem("loggedinUser")||"null")}function pe(){return(pe=Object(N.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(){return(be=Object(N.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return se=se.filter((function(e){return e._id!==t})),e.abrupt("return",ae.remove("user",t));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){return(he=Object(N.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=se.indexOf((function(e){return e._id!==t.id})),se.splice(n,1,t),e.abrupt("return",ae.put("user",t));case 5:t=e.sent,ue()._id===t._id&&de(t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(){return function(){var e=Object(N.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.getUsers();case 2:n=e.sent,t({type:"SET_USERS",users:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function fe(){return function(){var e=Object(N.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.logout();case 3:t({type:"SET_USER",user:null}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("UserActions: err in logout",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}var me=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={searchLetters:""},e.toggleUser=function(t){e.props.members.find((function(e){return e._id===t._id}))?e.props.card?(e.props.removeCardMember(e.props.board,e.props.card,t._id),e.props.onRemoveCardMember(t)):e.props.removeMember(t._id,e.props.board):e.props.card?(e.props.addCardMember(e.props.board,e.props.card,t),e.props.onAddCardMember(t)):e.props.addToMembers(t,e.props.board)},e.getMembers=function(t){return e.props.members.find((function(e){return e._id===t}))},e.handleChange=function(t){var n=t.target.value;e.setState({searchLetters:n})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.members,r=t.allUsers;return n?Object(C.jsx)(re.a,{onClickAway:this.props.onCloseModal,children:Object(C.jsxs)("div",{className:"add-member-modal",style:this.props.style,children:[Object(C.jsx)("h3",{children:"Members"}),Object(C.jsx)("input",{type:"search",onChange:this.handleChange,name:"search-member",id:"",autoCorrect:"off",autoComplete:"off"}),Object(C.jsx)("div",{className:"add-members-container",children:r.filter((function(t){return!e.state.searchLetters||t.fullName.includes(e.state.searchLetters)})).map((function(t){return Object(C.jsxs)("div",{className:"member-container",onClick:function(){return e.toggleUser(t)},children:[Object(C.jsx)(ne,{name:t.fullName,imgUrl:t.imgUrl}),Object(C.jsx)("p",{children:t.fullName}),e.getMembers(t._id)&&Object(C.jsx)("div",{children:Object(C.jsx)(Y.a,{})})]},t._id)}))})]})}):Object(C.jsx)("div",{children:"loading"})}}]),n}(r.Component),ve={loadAllUsers:je,addToMembers:function(e,t){var n=e._id,r=e.fullName,a=e.imgUrl;return function(){var e=Object(N.a)(S.a.mark((function e(s){var c,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={_id:n,fullName:r,imgUrl:a},(o=JSON.parse(JSON.stringify(t))).members.unshift(c),s({type:"SET_BOARD",board:o}),e.next=6,D.a.updateBoard(o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},addCardMember:function(e,t,n){var r=n._id,a=n.fullName,s=n.imgUrl;return function(){var n=Object(N.a)(S.a.mark((function n(c){var o,i,l,d,u;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={_id:r,fullName:a,imgUrl:s},(i=JSON.parse(JSON.stringify(t))).members||(i.members=[]),i.members.push(o),l=JSON.parse(JSON.stringify(e)),d=l.groups.findIndex((function(e){return e.cards.find((function(e){return e.id===i.id}))})),u=l.groups[d].cards.findIndex((function(e){return e.id===i.id})),l.groups[d].cards[u]=i,c({type:"SET_BOARD",board:l}),n.next=11,D.a.updateBoard(l);case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},removeMember:function(e,t){return function(){var n=Object(N.a)(S.a.mark((function n(r){var a,s;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=JSON.parse(JSON.stringify(t)),s=a.members.findIndex((function(t){return t._id===e})),a.members.splice(s,1),r({type:"SET_BOARD",board:a}),n.next=6,D.a.updateBoard(a);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},removeCardMember:function(e,t,n){return function(){var r=Object(N.a)(S.a.mark((function r(a){var s,c,o,i;return S.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(s=JSON.parse(JSON.stringify(t))).members||(s.members=[]),s.members=s.members.filter((function(e){return e._id!==n})),c=JSON.parse(JSON.stringify(e)),o=c.groups.findIndex((function(e){return e.cards.find((function(e){return e.id===s.id}))})),i=c.groups[o].cards.findIndex((function(e){return e.id===s.id})),c.groups[o].cards[i]=s,a({type:"SET_BOARD",board:c}),r.next=10,D.a.updateBoard(c);case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}},ge=Object(i.b)((function(e){return{board:e.boardModule.currBoard,allUsers:e.userModule.users}}),ve)(me),Oe=n(303),xe=n(314),ye=n(112),we=n.n(ye);function Ce(e){if(!e.dueDate)return Object(C.jsx)(a.a.Fragment,{});var t=(e.dueDate-Date.now())/1e3/60/60/24,n=new Date(e.dueDate),r=n.toLocaleString("en-US",{month:"short"}),s=n.getDate(),c="".concat(r," ").concat(s);if(Math.abs(t)>365){var o=n.getFullYear();c+=", ".concat(o)}if(e.displayTime){var i=n.toLocaleTimeString();c+=" at ".concat(i)}var l="card-preview-due-date-container card-preview-due-date-container-";switch(!0){case t>7:l+="long";break;case t>3:l+="medium";break;case t>=0:l+="due-soon";break;default:l+="overdue"}return Object(C.jsxs)("div",{className:l,children:[Object(C.jsx)(we.a,{fontSize:"inherit"}),c]})}var ke=n(155),Se=n.n(ke),Ne=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={date:null,isPopperOpen:!1,anchor:null},e.setDefaultDate=function(){e.setState({date:e.props.dueDate})},e.openModal=function(){e.setState({isPopperOpen:!0})},e.closeModal=function(){e.setState({isPopperOpen:!1})},e.onSetDueDate=function(t){var n=t.target.value,r=new Date(n).getTime();e.setState({date:r})},e.submitDueDate=function(){e.props.onUpdateDueDate(e.state.date)},e.onRemoveDueDate=function(t){e.setState({date:null},e.submitDueDate),e.closeModal()},e.getDisplayDateBtn=function(){return!e.state.date||e.props.alwaysShowButton?Object(C.jsxs)("button",{className:"flex",onClick:e.openModal,ref:e.anchor,children:[Object(C.jsx)(Se.a,{}),Object(C.jsx)("span",{style:e.props.applyStyle?{fontWeight:"500"}:{},className:"sidebar-button-text",children:"Set due date"})]}):Object(C.jsx)("div",{onClick:e.openModal,ref:e.anchor,className:"set-due-date-expanded",children:Object(C.jsx)(Ce,{dueDate:e.state.date,displayTime:e.props.displayTime})})},e.parseDate=function(){var t=new Date(e.state.date);e.state.date||(t=new Date(Date.now()));var n=t.getFullYear(),r=[n,t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes()];return r=r.map((function(e){return 1===(e=e.toString()).length&&(e="0".concat(e)),e})),"".concat(n,"-").concat(r[1],"-").concat(r[2],"T").concat(r[3],":").concat(r[4])},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.anchor=a.a.createRef(),this.setState({anchor:this.anchor}),this.setDefaultDate()}},{key:"componentDidUpdate",value:function(e,t){if(e.dueDate!==this.props.dueDate)return this.setDefaultDate()}},{key:"render",value:function(){return this.state.anchor?Object(C.jsxs)(C.Fragment,{children:[this.getDisplayDateBtn(),this.state.anchor.current?Object(C.jsxs)(Oe.a,{anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},open:this.state.isPopperOpen,anchorEl:this.state.anchor.current,onClose:this.closeModal,onBackdropClick:this.closeModal,children:[Object(C.jsx)("form",{noValidate:!0,children:Object(C.jsx)(xe.a,{onBlur:this.submitDueDate,onChange:this.onSetDueDate,id:"datetime-local",label:"Set Due Date",type:"datetime-local",value:this.parseDate(),InputLabelProps:{shrink:!0}})}),Object(C.jsx)("div",{className:"remove-date-btn-container",children:Object(C.jsx)("button",{className:"cancel-btn",onClick:this.onRemoveDueDate,children:"Remove Due Date"})})]}):Object(C.jsx)(a.a.Fragment,{})]}):Object(C.jsx)(a.a.Fragment,{})}}]),n}(r.Component),De=n(316),Ae=n(304),Ee=n(156),Be=n.n(Ee),Ie=n(159),Me=n.n(Ie),Te=n(157),Ue=n.n(Te),Le=n(158),Fe=n.n(Le),Pe=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={isOpen:!1,offsetTop:null,offsetLeft:null,width:null,txtValue:"",isMemberListOpen:!1,isLabelPaletteShown:!1},e.ref=a.a.createRef(),e.submitCard=function(t){return new Promise((function(n){e.props.updateCard(e.props.board,t).then((function(){e.onClose()}))}))},e.getParentPos=function(){var t=e.props.anchorEl.current.parentElement.getBoundingClientRect();console.log("pos",t),e.setState({offsetTop:t.top,offsetLeft:t.left,width:t.width})},e.onClose=function(){e.props.onClose()},e.onChange=function(t){var n=t.target.value;e.setState({txtValue:n})},e.onKeyPress=function(t){if("Enter"===t.key)return e.onUpdateHeader()},e.onUpdateHeader=function(){var t=Object(d.a)({},e.props.props.card);t.title=e.state.txtValue,e.submitCard(t)},e.onDeleteCard=function(){var t=Object(d.a)({},e.props.props.card);t.deleteddAt=Date.now(),e.props.onRemoveCard(e.props.board,t.id)},e.createActivity=function(t){var n={txt:t,commentTxt:"",card:{id:e.props.props.card.id,title:e.props.props.card.title}};return console.log("CREATING ACTIVITY FOR CARD "+JSON.stringify(n)),D.a.createActivity(n)},e.onToggleLabelPaletteShown=function(){e.setState({isLabelPaletteShown:!e.state.isLabelPaletteShown,isMemberListOpen:!1})},e.toggleCardMembersMenu=function(){e.setState({isMemberListOpen:!e.state.isMemberListOpen,isLabelPaletteShown:!1})},e.onUpdateCardMembers=function(){var t=Object(N.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({card:n},(function(){var t=e.createActivity("edited the card members");e.submitCard(n,t)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onAddCardMember=function(t){var n=JSON.parse(JSON.stringify(e.props.props.card.members));n.unshift(t),e.onChangeMembers(n,"added a member")},e.onRemoveCardMember=function(t){var n=JSON.parse(JSON.stringify(e.props.props.card.members));n=n.filter((function(e){return e._id!=t._id})),e.onChangeMembers(n,"removed a member")},e.onChangeMembers=function(t,n){var r=Object(d.a)({},e.props.props.card);r.members=t,console.log(t),e.setState({card:r},(function(){var t=e.createActivity(n);e.submitCard(r,t)}))},e.onUpdateDueDate=function(){var t=Object(N.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=Object(d.a)({},e.props.props.card)).dueDate=n,e.setState({card:r},Object(N.a)(S.a.mark((function t(){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.createActivity("updated due date"),t.next=3,e.submitCard(r,n);case 3:case"end":return t.stop()}}),t)}))));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.getParentPos(),this.getCurrTitle()}},{key:"componentDidUpdate",value:function(e,t){}},{key:"getCurrTitle",value:function(){var e=this.props.props.card.title;this.setState({txtValue:e})}},{key:"render",value:function(){return Object(C.jsx)(De.a,{onClose:this.props.onClose,open:!0,children:Object(C.jsxs)("div",{className:"card-edit-container",onClick:function(e){return e.stopPropagation()},style:{left:"".concat(this.state.offsetLeft,"px"),top:"".concat(this.state.offsetTop,"px"),position:"fixed"},children:[Object(C.jsxs)("div",{className:"card-edit-left",children:[Object(C.jsx)("div",{className:"card-preview",style:{width:"".concat(this.state.width,"px")},children:Object(C.jsx)("form",{children:Object(C.jsx)("textarea",{className:"card-preview-title-edit",autoFocus:!0,onKeyPress:this.onKeyPress,onChange:this.onChange,value:this.state.txtValue})})}),Object(C.jsx)("button",{className:"save-btn",onClick:this.onUpdateHeader,children:"Save"})]}),Object(C.jsx)("div",{className:"card-edit-right",children:Object(C.jsxs)("div",{className:"card-preview-edit-actions-container",children:[Object(C.jsxs)(Ae.a,{style:{textTransform:"none"},onClick:this.onDeleteCard,children:[Object(C.jsx)(Be.a,{})," ",Object(C.jsx)("span",{children:"Delete card"})]}),Object(C.jsxs)(Ae.a,{style:{textTransform:"none"},onClick:this.onToggleLabelPaletteShown,children:[Object(C.jsx)(Ue.a,{}),Object(C.jsx)("span",{children:"Edit labels"})]}),Object(C.jsxs)(Ae.a,{style:{textTransform:"none"},ref:this.ref,onClick:this.toggleCardMembersMenu,children:[Object(C.jsx)(Fe.a,{}),Object(C.jsx)("span",{children:"Edit members"})]}),Object(C.jsx)(Ne,{pplyStyle:!0,dueDate:this.props.props.card.dueDate,onUpdateDueDate:this.onUpdateDueDate,alwaysShowButton:!0}),Object(C.jsxs)(Ae.a,{style:{textTransform:"none"},onClick:this.onClose,children:[Object(C.jsx)(Me.a,{}),Object(C.jsx)("span",{children:"Close"})]})]})}),this.state.isLabelPaletteShown&&Object(C.jsx)(ee,{createActivity:this.createActivity,card:this.props.props.card,isShownOnBoard:!0,style:{left:"".concat(-34,"px"),top:"".concat(58,"px"),position:"relative"}}),this.state.isMemberListOpen?Object(C.jsx)(ge,{ref:this.ref,onCloseModal:this.toggleCardMembersMenu,allExistingUsers:this.props.board.members,card:this.props.props.card,members:this.props.props.card.members,onAddCardMember:this.onAddCardMember,onRemoveCardMember:this.onRemoveCardMember,style:{left:"".concat(92,"px"),top:"".concat(78,"px"),position:"relative"}}):Object(C.jsx)(a.a.Fragment,{})]})})}}]),n}(r.Component),Re={updateCard:L,onRemoveCard:function(e,t){return function(){var n=Object(N.a)(S.a.mark((function n(r){var a,s,c;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=JSON.parse(JSON.stringify(e)),s=a.groups.findIndex((function(e){return e.cards.find((function(e){return e.id===t}))})),c=a.groups[s].cards.findIndex((function(e){return e.id===t})),a.groups[s].cards.splice(c,1),r({type:"SET_BOARD",board:a}),n.next=8,D.a.updateBoard(a);case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log("error deleting card",n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},addActivity:F},_e=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),Re)(Pe);function Ge(e){if(!e.cardLabels||!e.boardLabels)return Object(C.jsx)(a.a.Fragment,{});function t(t){var n=e.boardLabels.find((function(e){return e.id===t.id}));return e.preview?e.isFull?Object(C.jsx)("div",{className:"card-preview-full-label ".concat(null===n||void 0===n?void 0:n.color),children:null===n||void 0===n?void 0:n.name}):Object(C.jsx)("div",{className:"card-preview-collapsed-label ".concat(null===n||void 0===n?void 0:n.color)}):Object(C.jsx)("div",{className:"card-details-label ".concat(null===n||void 0===n?void 0:n.color),children:null===n||void 0===n?void 0:n.name})}return Object(C.jsx)("div",{className:"card-preview-labels flex",children:e.cardLabels.map((function(n,r){return Object(C.jsxs)("div",{onClick:e.onClickLabel,children:[" ",t(n)," "]},r)}))})}var Je=n(160),Ve=n.n(Je),ze=n(161),We=n.n(ze),He=n(162),Ke=n.n(He),Ye=n(67),qe=n.n(Ye),Ze=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={isEditing:!1},e.ref=a.a.createRef(),e.componentDidMount=function(){console.log("des",e.props.card.attachments)},e.getCardPreviewAttachments=function(){var t=e.props.card.attachments;return t&&Object.keys(t)&&t.length?Object(C.jsx)("div",{className:"card-preview-attr",children:Object(C.jsx)(Ve.a,{style:{fontSize:16}})},"0"):null},e.getCardPreviewHoldDesc=function(){var t=e.props.card.description;return t&&Object.keys(t)?Object(C.jsx)("div",{className:"card-preview-attr",children:Object(C.jsx)(We.a,{style:{fontSize:16}})},"1"):null},e.getCardPreviewComments=function(){var t=e.props.board.activities;if(!t)return null;var n=t.filter((function(t){return t.card.id===e.props.card.id}));return(n=n.filter((function(e){return e.commentTxt?e:null})))&&n.length?Object(C.jsxs)("div",{className:"card-preview-attr",children:[Object(C.jsx)(Ke.a,{style:{fontSize:16}})," ",n.length]},"3"):null},e.getCardPreviewChecklist=function(){var t=e.props.card.checklists;if(!t||!t.length)return null;var n=0,r=0,a="";return t.forEach((function(e){e.todos.forEach((function(e){e.isDone&&(n+=1),r+=1}))})),r?(n===r&&(a=" card-preview-checklist-counter-done"),Object(C.jsxs)("div",{className:"card-preview-attr card-preview-checklist-counter".concat(a),children:[Object(C.jsx)(qe.a,{style:{fontSize:16}})," ",Object(C.jsxs)("span",{children:[n,"/",r]})," "]},"2")):null},e.getCardPreviewMembers=function(){var t=e.props.card.members;if(!t||!t.length)return Object(C.jsx)(a.a.Fragment,{});var n=t.map((function(e,t){return Object(C.jsx)(ne,{name:e.fullName,imgUrl:e.imgUrl},t)}));return Object(C.jsx)("div",{className:"card-preview-members",children:n})},e.getCardPreviewAttrs=function(){var t=[e.getCardPreviewAttachments(),e.getCardPreviewHoldDesc(),e.getCardPreviewChecklist(),e.getCardPreviewComments()];if(e.getCardPreviewMembers()||!t.every((function(e){return!e})))return Object(C.jsx)("div",{className:"card-preview-attrs",children:t.map((function(e,t){return e||Object(C.jsx)(a.a.Fragment,{},t)}))})},e.onDetails=function(t){e.props.history.push("/board/".concat(e.props.board._id,"/card/").concat(e.props.card.id))},e.onOpenCardActions=function(t){t.stopPropagation(),e.onSetEditing()},e.onToggleLabels=function(t){return t.stopPropagation(),e.props.toggleFullLabels()},e.onSetEditing=function(){e.setState({isEditing:!0})},e.onSetNotEditing=function(){e.setState({isEditing:!1})},e.getCardCover=function(){var t=e.props.card.cover;return t?t.src?Object(C.jsx)("div",{className:"card-preview-cover-image",style:{backgroundImage:"url(".concat(t.src,")")}}):Object(C.jsx)("div",{className:"card-preview-cover-color",style:{backgroundColor:t.color}}):Object(C.jsx)(a.a.Fragment,{})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.props.card,n={backgroundImage:"url("+t.attachments+")"};return Object(C.jsx)(G.b,{draggableId:this.props.card.id,index:this.props.index,children:function(r){return Object(C.jsxs)("section",Object(d.a)(Object(d.a)(Object(d.a)({className:"card-preview flex justify-space-between",onClick:e.onDetails},r.draggableProps),r.dragHandleProps),{},{ref:r.innerRef,children:[Object(C.jsxs)("div",{className:"attach-div",children:[Object(C.jsxs)("div",{className:"card-preview-start",children:[e.getCardCover(),t.attachments&&Object(C.jsx)("img",{className:"img-attach",style:n}),Object(C.jsx)(Ge,{onClickLabel:e.onToggleLabels,isFull:e.props.fullLabel,cardLabels:t.labels,boardLabels:e.props.board.labels,preview:!0}),Object(C.jsx)("div",{className:"card-preview-header",children:t.title})]}),Object(C.jsxs)("div",{className:"card-preview-attrs",children:[Object(C.jsx)(Ce,{dueDate:t.dueDate}),e.getCardPreviewAttrs(),e.getCardPreviewMembers()]})]}),Object(C.jsxs)("div",{className:"card-btn",ref:e.ref,onClick:e.onOpenCardActions,children:[Object(C.jsx)(z.a,{fontSize:"inherit"}),e.state.isEditing?Object(C.jsx)(_e,{anchorEl:e.ref,props:e.props,onClose:e.onSetNotEditing}):Object(C.jsx)(a.a.Fragment,{})]}),r.placeholder]}))}})}}]),n}(r.Component),Xe={toggleFullLabels:function(){return function(e){e({type:"TOGGLE_FULL_LABEL"})}}},Qe=Object(i.b)((function(e){return{board:e.boardModule.currBoard,fullLabel:e.boardModule.fullLabel}}),Xe)(Ze),$e=n(68),et=n.n($e),tt=n(49),nt=n.n(tt),rt=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={isEditing:!1,txtValue:""},e.onChange=function(t){var n=t.target.value;e.setState({txtValue:n})},e.onKeyPress=function(t){"Enter"===t.key&&e.onSubmit(t)},e.setEditing=function(){e.setState({isEditing:!0})},e.setNotEditing=function(){e.setState({isEditing:!1})},e.getIsEditing=function(){return e.state.isEditing?Object(C.jsx)("div",{className:"new-item-form",children:Object(C.jsxs)("form",{onKeyDown:e.onKeyPress,onBlur:e.setNotEditing,onSubmit:e.onSubmit,children:[Object(C.jsx)("textarea",{id:"add-new-card",placeholder:e.props.placeHolderTxt,autoFocus:!0,type:"text",onChange:e.onChange,value:e.state.txtValue}),Object(C.jsxs)("div",{className:"save-btn-container",children:[Object(C.jsx)("button",{className:"save-btn",onMouseDown:e.onSubmit,children:e.props.addBtnTxt}),Object(C.jsx)(nt.a,{className:"close",onClick:e.setNotEditing})]})]})}):Object(C.jsxs)("div",{className:"new-item-btn",onClick:e.setEditing,children:[Object(C.jsx)(et.a,{style:{fontSize:"20px"}}),e.props.addItemTxt]})},e.onSubmit=function(){var t=Object(N.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.state.txtValue){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.props.onAdd(e.state.txtValue);case 5:!1,"",e.setState({isEditing:false,txtValue:""});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(p.a)(n,[{key:"render",value:function(){return Object(C.jsx)("div",{style:{border:"0px"},className:"new-item-container",children:this.getIsEditing()})}}]),n}(r.Component),at=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).addCard=function(t){t.stopPropagation(),e.props.onAdd("New Card..")},e.removeGroup=function(t){t.stopPropagation(),e.props.onRemoveGroup(e.props.board,e.props.groupId),e.props.toggleMenu()},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return Object(C.jsx)(re.a,{onClickAway:function(){return e.props.toggleMenu()},children:Object(C.jsxs)("div",{className:"group-menu-container",children:[Object(C.jsx)("div",{children:"List Actions"}),Object(C.jsx)("div",{children:Object(C.jsx)("hr",{})}),Object(C.jsx)("div",{onClick:this.addCard,className:"group-menu-item",children:"+ Add Card..."}),Object(C.jsx)("div",{className:"group-menu-item",children:"Delete All Cards..."}),Object(C.jsx)("div",{children:Object(C.jsx)("hr",{})}),Object(C.jsx)("div",{className:"group-menu-item",onClick:this.removeGroup,children:"Delete This Group..."})]})})}}]),n}(r.Component),st={onRemoveGroup:U},ct=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),st)(at),ot=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={currGroupName:"",currGroupId:null,isMenuShown:!1,isChangeGroupShown:!1},e.onAddCard=function(t){return console.log("group preview",e.props.group),e.props.addCard(e.props.board,t,e.props.group.id)},e.getAddItemTxt=function(t){return e.props.group.cards.length?"Add another card":"Add a card"},e.handleChangeGroupName=function(t){e.setState({currGroupName:t.target.value})},e.onSubmit=function(t){t.preventDefault();var n=e.state,r=n.currGroupId,a=n.currGroupName;e.props.setNewGroupName(r,a,e.props.board),e.setState({isChangeGroupShown:!1})},e.toggleMenu=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&t.stopPropagation();var n=!e.state.isMenuShown;e.setState({isMenuShown:n})},e.onKeyPress=function(t){"Enter"===t&&e.closeChangeGroupName(t)},e.openHeadrEdit=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&t.stopPropagation(),e.setState({isChangeGroupShown:!0})},e.closeChangeGroupName=function(t){e.setState({isChangeGroupShown:!1}),e.onSubmit(t)},e.onOpenChangeGroupName=function(t,n){e.setState({currGroupId:t,currGroupName:n,isChangeGroupShown:!0})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.props.group;return Object(C.jsx)(G.b,{draggableId:t.id,index:this.props.index,children:function(n){return Object(C.jsxs)("section",Object(d.a)(Object(d.a)({className:"card-list",ref:n.innerRef},n.draggableProps),{},{children:[Object(C.jsxs)("div",Object(d.a)(Object(d.a)({className:"group-preview-header"},n.dragHandleProps),{},{children:[!e.state.isChangeGroupShown&&Object(C.jsx)("div",{onClick:function(){return e.onOpenChangeGroupName(t.id,t.title)},children:t.title}),e.state.isChangeGroupShown?Object(C.jsx)(re.a,{onClickAway:e.closeChangeGroupName,children:Object(C.jsx)("form",{onSubmit:e.onSubmit,className:"change-group-name",children:Object(C.jsx)("input",{className:"change-group-name-input",type:"text",name:"group-name",onKeyPress:e.onKeyPress,onChange:e.handleChangeGroupName,defaultValue:t.title,autoFocus:!0,spellCheck:"false",autoComplete:"off",onFocus:function(e){return e.target.select()}})})}):"",Object(C.jsx)("span",{onClick:e.toggleMenu,className:"list-header-extras material-icons dots-icon",children:"more_horiz"}),e.state.isMenuShown&&Object(C.jsx)(ct,{toggleMenu:e.toggleMenu,groupId:t.id,onAdd:e.onAddCard})]})),Object(C.jsx)(G.c,{droppableId:t.id,type:"card",children:function(n){return Object(C.jsxs)("div",Object(d.a)(Object(d.a)({className:"cards-content-wrapper",ref:n.innerRef},n.droppableProps),{},{children:[t.cards.map((function(t,n){if(!t.archivedAt)return Object(C.jsx)(Qe,{card:t,index:n,history:e.props.history},t.id)})),n.placeholder]}))}}),Object(C.jsx)("div",{className:"new-card-btn-container",id:"add-btn",children:Object(C.jsx)(rt,{addItemTxt:e.getAddItemTxt(),placeHolderTxt:"Add a card title..",addBtnTxt:"Add Card",onAdd:e.onAddCard})})]}))}})}}]),n}(r.Component),it={addCard:function(e,t,n){return function(){var r=Object(N.a)(S.a.mark((function r(a){var s;return S.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,B.addCard(e,t,n);case 3:s=r.sent,a({type:"SET_BOARD",board:s}),D.a.updateBoard(s),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.log("ReviewActions: err in addCard",r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()},setNewGroupName:function(e,t,n){return function(){var r=Object(N.a)(S.a.mark((function r(a){var s,c,o;return S.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,s=n.groups.findIndex((function(t){return t.id===e})),t!==n.groups[s].title&&t.trim()){r.next=4;break}return r.abrupt("return");case 4:return c=JSON.parse(JSON.stringify(n)),o=t.replace(/\s+/g," "),c.groups[s].title=o.trim(),a({type:"SET_BOARD",board:c}),r.next=10,D.a.updateBoard(c);case 10:r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),console.log("error setting group name",r.t0);case 15:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e){return r.apply(this,arguments)}}()}},lt=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),it)(ot),dt=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={isNewGroupShown:!1,groups:null},e.closeNewGroup=function(){e.setState({isNewGroupShown:!1})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.groups;t.onAddGroup;return n?Object(C.jsxs)("section",{className:"group-list flex",children:[Object(C.jsx)(G.c,{droppableId:"droppableGroupId",direction:"horizontal",type:"group",children:function(t){return Object(C.jsxs)("div",Object(d.a)(Object(d.a)({className:"flex cards"},t.droppableProps),{},{ref:t.innerRef,children:[n.map((function(t,n){return Object(C.jsx)(lt,{id:t.id,group:t,index:n,history:e.props.history},t.id)})),t.placeholder]}))}}),Object(C.jsxs)("div",{className:"new-group",children:[!this.state.isNewGroupShown&&Object(C.jsxs)("div",{className:"add-new-group-text btn",onClick:function(){return e.setState({isNewGroupShown:!0})},children:[Object(C.jsx)("span",{className:"material-icons",children:"add"}),"Add another list"]}),this.state.isNewGroupShown&&Object(C.jsx)(_,{closeNewGroup:this.closeNewGroup})]})]}):Object(C.jsx)("h1",{children:"Loading..."})}}]),n}(r.Component),ut=n(163),pt=n.n(ut),bt=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={description:"",isEditing:!1},e.setDescriptionFromProps=function(){var t=e.props.description;t||(t=""),e.setState({description:t})},e.onChange=function(t){var n=t.target.value;e.setState({description:n})},e.setEditing=function(){e.setState({isEditing:!0})},e.setNotEditing=function(){e.setState({isEditing:!1})},e.onSave=function(){e.props.onUpdateDesc(e.state.description),e.setNotEditing()},e.getDescriptionTxt=function(){return e.state.description?e.state.description:"Add a more detailed description\u2026"},e.getIsEditing=function(){return e.state.isEditing?Object(C.jsxs)("div",{className:"description-active-box flex column",children:[Object(C.jsx)("textarea",{value:e.state.description,autoFocus:!0,onChange:e.onChange,onBlur:e.onSave,placeholder:"Enter a more detailed description here...",className:"modal-desc-textarea"}),Object(C.jsx)("button",{onClick:e.onSave,children:"Save"})]}):Object(C.jsx)("pre",{className:"description-text-box",onClick:e.setEditing,children:e.getDescriptionTxt()})},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.setDescriptionFromProps()}},{key:"componentDidUpdate",value:function(e,t){e.description!==this.props.description&&this.setDescriptionFromProps()}},{key:"render",value:function(){return Object(C.jsxs)("div",{className:"modal-description flex",children:[Object(C.jsx)(pt.a,{}),Object(C.jsxs)("div",{className:"description-txt flex column",children:[Object(C.jsx)("h3",{className:"description-title",children:"Description"}),this.getIsEditing()]})]})}}]),n}(r.Component),ht=n(317),jt=n(305),ft=n(306),mt=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={isEditing:!1,txtValue:""},e.setEditing=function(){e.setState({isEditing:!0})},e.setNotEditing=function(){e.setState({isEditing:!1})},e.onChange=function(t){e.setState({txtValue:t.target.value})},e.onSubmit=function(t){t.preventDefault(),e.state.txtValue&&(e.props.onAddComment(e.state.txtValue),e.setNotEditing(),e.setState({txtValue:""}))},e.onBlur=function(){if(!e.state.txtValue)return e.setNotEditing()},e.onSave=function(t){e.onSubmit(t)},e.getNewCommentDisplay=function(){return e.state.isEditing?Object(C.jsx)("div",{className:"add-comment-editing-container",children:Object(C.jsx)("form",{onBlur:e.onBlur,onSubmit:e.onSubmit,children:Object(C.jsx)("input",{className:"add-comment-input",type:"text",placeholer:"Write a comment...",autoFocus:!0,value:e.state.txtValue,onChange:e.onChange})})}):Object(C.jsx)("div",{className:"add-comment-editing-closed",children:"Write a comment..."})},e}return Object(p.a)(n,[{key:"render",value:function(){return Object(C.jsx)("div",{className:"editing-section-container",children:Object(C.jsxs)(ht.a,{expanded:this.state.isEditing,onClick:this.setEditing,classes:{expanded:"editing-container-expanded",root:"editing-container-collapsed"},children:[Object(C.jsx)(jt.a,{"aria-controls":"panel1a-content",id:"panel1a-header",children:this.getNewCommentDisplay()}),Object(C.jsx)(ft.a,{children:Object(C.jsx)("div",{children:Object(C.jsx)("button",{className:"save-btn",disabled:!this.state.txtValue.length,onClick:this.onSave,children:"Add Comment"})})})]})})}}]),n}(r.Component),vt=n(307),gt=n(98);function Ot(e){var t=e.boardId,n=e.displayMode,r=e.activities;return r?(r&&r.length>15&&(r=r.slice(0,14)),Object(C.jsx)("ul",{className:"activity-list clean-list",children:r.map((function(e){var r=e.byMember;return Object(C.jsxs)("li",{className:"whole-activity flex align-center",children:[console.log(r),"user"!==n?Object(C.jsx)(ne,{name:r&&r.fullName?r.fullName:"Guest",imgUrl:r?r.imgUrl:""}):Object(C.jsx)(a.a.Fragment,{}),Object(C.jsxs)("pre",{className:"activity-details",children:[Object(C.jsxs)("div",{className:"flex activity-text-box-text",children:["user"===n?Object(C.jsx)(a.a.Fragment,{}):t?Object(C.jsx)(o.b,{to:"/board/".concat(t),children:r.fullName?r.fullName:"Guest "}):"".concat(r.fullName?r.fullName:"Guest"," "),Object(C.jsx)("span",{children:e.commentTxt?"commented:":""+e.txt}),e.commentTxt&&Object(C.jsx)("div",{children:e.commentTxt}),"card"!==n&&Object(C.jsxs)("span",{children:["in ",t?Object(C.jsx)(o.b,{to:"/board/".concat(t,"/").concat(e.card.id,"/"),children:e.card.title}):"".concat(e.card.title)]})]}),Object(C.jsx)("span",{children:gt.a(e.createdAt)})]})]},e.id)}))})):Object(C.jsx)("div",{children:Object(C.jsx)(vt.a,{})})}var xt=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={txt:"",isEditing:!1},e.onChangeText=function(t){var n=t.target.value;e.setState({txt:n})},e.onSubmit=function(t){t.preventDefault(),e.state.txt&&(e.setNotEditing(),e.props.onUpdate(e.state.txt))},e.setEditing=function(){e.setState({isEditing:!0})},e.setNotEditing=function(){e.setState({isEditing:!1})},e.getIsEditing=function(){return e.state.isEditing?Object(C.jsx)("form",{onBlur:e.setNotEditing,onSubmit:e.onSubmit,children:Object(C.jsx)("input",{name:"header",type:"text",autoFocus:!0,value:e.state.txt,onChange:e.onChangeText})}):Object(C.jsx)("div",{onClick:e.setEditing,children:Object(C.jsx)("h2",{children:e.state.txt})})},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.titleTxt;this.setState({txt:e})}},{key:"render",value:function(){return Object(C.jsx)("div",{children:this.getIsEditing()})}}]),n}(r.Component),yt=n(308),wt=n(309),Ct=n(310),kt=n(311),St=n(312),Nt=n(315),Dt=n(95),At=n.n(Dt),Et=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={isDone:!1,isEditing:!1,txtValue:"",isNew:!1},e.setEditing=function(){e.setState({isEditing:!0})},e.setNotEditing=function(){e.setState({isEditing:!1})},e.removeText=function(){e.setState({txtValue:""})},e.getNewTodoDisplay=function(){return e.state.isEditing?Object(C.jsx)("form",{onBlur:e.setNotEditing,onSubmit:e.onSubmit,children:Object(C.jsx)("input",{className:"checkbox-text-edit",type:"text",autoFocus:!0,value:e.state.txtValue,onChange:e.onChange})}):Object(C.jsxs)("button",{className:"flex checklist-add-todo",onClick:e.setEditing,children:[Object(C.jsx)(et.a,{className:"add-icon"}),"Add an item"]})},e.getTodoClassName=function(){var t=e.state.isDone?"todo-done":"todo-not-done";return"flex justify-space-between checklist-todo-title ".concat(t)},e.getTextBox=function(){return e.state.isEditing?Object(C.jsx)(a.a.Fragment,{children:Object(C.jsxs)("form",{onBlur:e.setNotEditing,onSubmit:e.onSubmit,children:[Object(C.jsx)(Nt.a,{checked:e.state.isDone,onChange:e.onCheck,className:"checkbox-todo"}),Object(C.jsx)("input",{className:"checkbox-text-edit",type:"text",autoFocus:!0,value:e.state.txtValue,onChange:e.onChange}),Object(C.jsx)("button",{className:"save-btn",type:"submit",children:"Save"})]})}):Object(C.jsx)(a.a.Fragment,{children:Object(C.jsxs)("div",{className:e.getTodoClassName(),onClick:e.setEditing,children:[Object(C.jsxs)("div",{children:[Object(C.jsx)(Nt.a,{checked:e.state.isDone,onChange:e.onCheck,className:"checkbox-todo"}),e.state.txtValue]}),Object(C.jsx)(Ae.a,{onClick:e.onRemove,children:Object(C.jsx)(At.a,{className:"trash-bin-icon"})})]})})},e.onSubmit=function(t){t.preventDefault(),e.updateChecklist()},e.updateTodo=function(){var t=e.props.todo;if(t){var n=t.title,r=t.isDone;e.setState({isDone:r,txtValue:n})}},e.onChange=function(t){e.setState({txtValue:t.target.value})},e.onCheck=function(t){var n=t.target.checked;e.setState({isDone:n},(function(){e.updateChecklist()}))},e.getActivityTxt=function(){return e.state.isDone?"completed ".concat(e.state.txtValue):"marked ".concat(e.state.txtValue," incomplete")},e.onRemove=function(t){t.stopPropagation(),e.setState({txtValue:""},e.updateChecklist)},e.updateChecklist=function(){var t={id:e.props.todo?e.props.todo.id:E.a.makeId(),isDone:e.state.isDone,title:e.state.txtValue},n=e.getActivityTxt();e.state.isNew?(e.props.onUpdate(t),e.setState({txtValue:""})):e.props.onUpdate(t,n)},e}return Object(p.a)(n,[{key:"componentDidUpdate",value:function(e,t){e.title===this.props.title&&e.isDone===this.props.isDone||this.updateTodo()}},{key:"componentDidMount",value:function(){this.props.isNew&&this.setState({isNew:!0}),this.updateTodo()}},{key:"render",value:function(){return!this.props.displayCompleted&&this.state.isDone?Object(C.jsx)(a.a.Fragment,{}):Object(C.jsx)("div",{className:"checklist-todo",children:this.state.isNew?this.getNewTodoDisplay():this.getTextBox()})}}]),n}(r.Component),Bt=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={displayCompleted:!0,showDialog:!1,tasksCompleted:0,totalTasks:0},e.setTasksStatus=function(){var t=0,n=0;e.props.checklist.todos.forEach((function(e){e.isDone&&(t+=1),n+=1})),e.setState({tasksCompleted:t,totalTasks:n})},e.toggleDisplayCompleted=function(){return e.state.displayCompleted?e.setState({displayCompleted:!1}):e.setState({displayCompleted:!0})},e.getDisplayCheckedBtn=function(){return e.state.tasksCompleted?(t=e.state.displayCompleted?"Hide Completed Items":"Show Checked Items (".concat(e.state.tasksCompleted,")"),Object(C.jsx)("button",{onClick:e.toggleDisplayCompleted,children:t})):Object(C.jsx)(a.a.Fragment,{});var t},e.onRemoveChecklist=Object(N.a)(S.a.mark((function t(){var n,r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=Object(d.a)({},e.props.checklist)).title="",r="removed ".concat(e.props.checklist.title),e.props.onUpdate(n,r),e.closeDialog();case 5:case"end":return t.stop()}}),t)}))),e.openDialog=function(){e.setState({showDialog:!0})},e.closeDialog=function(){e.setState({showDialog:!1})},e.getTotalTasks=function(e){return e.todos.length},e.getCompletedTasks=function(e){return e.todos.filter((function(e){return e.isDone})).length},e.getPercentCompleted=function(t){return 0==e.getTotalTasks(t)?100:Math.round(e.getCompletedTasks(t)/e.getTotalTasks(t)*100)},e.onUpdateChecklist=function(t,n){var r=Object(l.a)(e.props.checklist.todos),a=r.findIndex((function(e){return e.id===t.id}));t.title?a<0?r.push(t):r[a]=t:r.splice(a,1);var s=Object(d.a)({},e.props.checklist);s.todos=r,e.props.onUpdate(s,n)},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.setTasksStatus()}},{key:"componentDidUpdate",value:function(e,t){this.props.checklist!==e.checklist&&this.setTasksStatus()}},{key:"render",value:function(){var e=this;return Object(C.jsxs)("div",{children:[Object(C.jsxs)("div",{className:"flex justify-space-between",children:[Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsx)(qe.a,{}),Object(C.jsx)("h3",{children:this.props.checklist.title})]}),Object(C.jsxs)("div",{children:[this.getDisplayCheckedBtn(),Object(C.jsx)("button",{className:"checklist-delete-button",onClick:this.openDialog,children:"Delete"})]})]}),Object(C.jsxs)("div",{children:[Object(C.jsxs)("div",{children:["%",this.getPercentCompleted(this.props.checklist)]}),Object(C.jsx)(yt.a,{value:this.getPercentCompleted(this.props.checklist),variant:"determinate"})]}),Object(C.jsxs)("main",{children:[this.props.checklist.todos.map((function(t){return Object(C.jsx)(Et,{displayCompleted:e.state.displayCompleted,todo:t,onUpdate:e.onUpdateChecklist},t.id)})),Object(C.jsx)(Et,{isNew:!0,onUpdate:this.onUpdateChecklist})]}),Object(C.jsxs)(De.a,{onClose:this.closeDialog,open:this.state.showDialog,children:[Object(C.jsx)(wt.a,{id:"alert-dialog-title",children:"Remove this checklist?"}),Object(C.jsx)(Ct.a,{children:Object(C.jsx)(kt.a,{id:"alert-dialog-description",children:"Deleting a checklist is permanent."})}),Object(C.jsxs)(St.a,{children:[Object(C.jsx)(Ae.a,{onClick:this.closeDialog,color:"primary",children:"Disagree"}),Object(C.jsx)(Ae.a,{onClick:this.onRemoveChecklist,color:"primary",autoFocus:!0,children:"Agree"})]})]})]})}}]),n}(r.Component);function It(e){return e.checklists&&e.checklists.length?Object(C.jsx)("div",{className:"checklists-container",children:e.checklists.map((function(t){return Object(C.jsx)(Bt,{checklist:t,addActivity:e.addActivity,onUpdate:e.onUpdate},t.id)}))}):Object(C.jsx)(a.a.Fragment,{})}var Mt=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={isEditing:!1,txtValue:""},e.setEditing=function(){e.setState({isEditing:!0})},e.setNotEditing=function(){e.setState({isEditing:!1})},e.onChange=function(t){e.setState({txtValue:t.target.value})},e.onSubmit=function(){var t=Object(N.a)(S.a.mark((function t(n){var r,a;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.state.txtValue){t.next=3;break}return t.abrupt("return",e.setNotEditing());case 3:r={id:E.a.makeId(),title:e.state.txtValue,todos:[]},a="added the checklist ".concat(e.state.txtValue),e.props.onUpdate(r,a),e.setState({txtValue:""}),e.setNotEditing();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getNewChecklistDisplay=function(){return e.state.isEditing?Object(C.jsxs)("form",{className:"new-checklist-form",onBlur:e.setNotEditing,onSubmit:e.onSubmit,children:[Object(C.jsx)("input",{className:"new-checklist-text",type:"text",autoFocus:!0,value:e.state.txtValue,onChange:e.onChange}),Object(C.jsx)("button",{className:"save-btn",onMouseDown:e.onSubmit,children:"Save"})]}):Object(C.jsxs)("button",{className:"flex",onClick:e.setEditing,children:[Object(C.jsx)(qe.a,{}),Object(C.jsx)("span",{className:"sidebar-button-text",children:"New checklist"})]})},e}return Object(p.a)(n,[{key:"render",value:function(){return Object(C.jsx)(C.Fragment,{children:this.getNewChecklistDisplay()})}}]),n}(r.Component),Tt=n(164),Ut=n.n(Tt),Lt=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={isModalShown:!1},e.onShowModal=function(){e.setState({isModalShown:!0})},e.onCloseModal=function(){e.setState({isModalShown:!1})},e.renderMemberList=function(t){return Object(C.jsxs)("div",{className:"members-container",children:[Object(C.jsx)("div",{className:"member-preview add-member-btn"+(e.props.showBig?" member-preview-big":""),onClick:function(){return e.onShowModal()},children:Object(C.jsx)(et.a,{className:"members-list-add-button"})}),Object(C.jsx)("div",{className:"add-member-modal-container",children:e.state.isModalShown&&Object(C.jsx)(ge,{onCloseModal:e.onCloseModal,allExistingUsers:e.props.allUsers,card:e.props.card,members:e.props.members})}),t.map((function(t){return Object(C.jsx)(ne,{name:t.fullName,imgUrl:t.imgUrl,showBig:e.props.showBig},t._id)}))]})},e.renderCardDetailsMemberList=function(t){return Object(C.jsxs)(C.Fragment,{children:[e.state.isModalShown&&Object(C.jsx)(ge,{onCloseModal:e.onCloseModal,allExistingUsers:e.props.allUsers,card:e.props.card,members:t,onAddCardMember:e.props.onAddCardMember,onRemoveCardMember:e.props.onRemoveCardMember}),Object(C.jsxs)("button",{class:"flex sidebar-button",onClick:function(){return e.onShowModal()},children:[Object(C.jsx)(Ut.a,{}),Object(C.jsx)("span",{class:"sidebar-button-text",children:"Members"})]})]})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.card?this.props.card.members:this.props.members;return e?this.props.card?this.renderCardDetailsMemberList(e):this.renderMemberList(e):Object(C.jsx)("h4",{children:"Loading..."})}}]),n}(r.Component),Ft=n(165),Pt=n.n(Ft),Rt=n(75),_t=n.n(Rt),Gt=n(72),Jt=n.n(Gt);function Vt(e){return Object(C.jsxs)("div",{className:"card-sidebar-container flex column",children:[Object(C.jsx)("h3",{children:"Add to card"}),Object(C.jsxs)("div",{className:"card-sidebar flex",children:[Object(C.jsx)(Lt,{members:e.card.members,onAddCardMember:e.onAddCardMember,onRemoveCardMember:e.onRemoveCardMember,allUsers:e.allUsers,card:e.card,showBig:!0}),Object(C.jsxs)("button",{className:"flex sidebar-button",onClick:e.toggleLabelPalette,children:[Object(C.jsx)(Pt.a,{}),Object(C.jsx)("span",{className:"sidebar-button-text",children:"Labels"})]}),Object(C.jsx)(Mt,{addActivity:e.addActivity,onUpdate:e.onUpdateChecklists}),Object(C.jsx)(Ne,{dueDate:e.dueDate,onUpdateDueDate:e.onUpdateDueDate,alwaysShowButton:!0}),e.isUploading?Object(C.jsx)("button",{disabled:!0,children:Object(C.jsx)(vt.a,{size:"14px"})}):Object(C.jsxs)("button",{className:"flex",onClick:e.toggleUploadDropzone,children:[Object(C.jsx)(Jt.a,{}),Object(C.jsx)("span",{children:"Attachment"})]}),!e.card.cover&&Object(C.jsxs)("button",{className:"sidebar-button",ref:e.anchorRef,onClick:e.toggleCoverSelector,children:[Object(C.jsx)(_t.a,{}),Object(C.jsx)("span",{children:"Cover"})]})]})]})}var zt=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={isEditing:!1,att:null,title:""},e.updateAttFromProps=function(){var t=Object(d.a)({},e.props.attachment),n=e.props.attachment.title;e.setState({att:t,title:n})},e.setEditing=function(t){return t?e.setState({isEditing:!0}):e.setState({isEditing:!1})},e.onChange=function(t){e.setState({title:t.target.value})},e.onRemove=function(t){e.setState({title:""},(function(){e.updateCard().then((function(){e.setState({att:null})}))}))},e.onSubmit=function(t){t.preventDefault(),e.updateCard()},e.updateCard=function(){return new Promise((function(t){var n=Object(d.a)({},e.state.att);n.title=e.state.title,e.props.onUpdate(n),e.setEditing(!1),t()}))},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.updateAttFromProps()}},{key:"componentDidUpdate",value:function(e,t){this.props.attachment!==e.attachment&&this.updateAttFromProps(),this.state.att,t.att}},{key:"render",value:function(){var e=this,t=this.state.att;return t?Object(C.jsxs)("div",{className:"card-attachment flex",children:[Object(C.jsx)("div",{className:"att-image",style:{backgroundImage:"url(".concat(t.src,")")}}),Object(C.jsxs)("div",{className:"att-details-container",children:[Object(C.jsx)("div",{className:"att-title",children:this.state.isEditing?Object(C.jsx)("form",{onSubmit:this.onSubmit,onBlur:function(){e.setEditing(!1)},children:Object(C.jsx)("input",{autoFocus:!0,onChange:this.onChange,type:"text",value:this.state.title,required:!0})}):Object(C.jsx)("h5",{onClick:function(){e.setEditing(!0)},children:this.state.title})}),Object(C.jsx)("div",{className:"att-date-added",children:gt.a(t.createdAt)})]}),Object(C.jsx)("div",{className:"att-remove",children:Object(C.jsx)(J.a,{onClick:this.onRemove,children:Object(C.jsx)(At.a,{})})})]}):Object(C.jsx)(a.a.Fragment,{})}}]),n}(r.Component);function Wt(e){return console.log(e),e.attachments?Object(C.jsxs)("div",{className:"card-attachments-container",children:[Object(C.jsx)("h3",{children:"Attachments"}),e.attachments.map((function(t){return Object(C.jsx)(zt,{onUpdate:e.onUpdate,attachment:t},t.id)}))]}):Object(C.jsx)(a.a.Fragment,{})}var Ht={uploadImg:function(e){return Kt.apply(this,arguments)}};function Kt(){return(Kt=Object(N.a)(S.a.mark((function e(t){var n,r,a,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"dahthio8n",n="https://api.cloudinary.com/v1_1/".concat("dahthio8n","/image/upload"),r=new FormData,console.log(t),r.append("file",t),r.append("upload_preset","ml_default"),e.prev=6,e.next=9,fetch(n,{method:"POST",body:r});case 9:return a=e.sent,e.next=12,a.json();case 12:return s=e.sent,console.log(s),e.abrupt("return",s.secure_url);case 17:e.prev=17,e.t0=e.catch(6),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[6,17]])})))).apply(this,arguments)}var Yt=n(182),qt=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={item:null},e.uploadImg=function(){var t=Object(N.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.setUploading();case 2:return t.next=4,Ht.uploadImg(n);case 4:r=t.sent,e.setState({item:r},e.submitImage);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.submitImage=Object(N.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.item){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.props.onAddImage(e.state.item);case 4:e.setState({item:null});case 5:case"end":return t.stop()}}),t)}))),e}return Object(p.a)(n,[{key:"handleChange",value:function(e){this.uploadImg(e[0])}},{key:"render",value:function(){var e=this;return Object(C.jsx)(Yt.a,{acceptedFiles:["image/*",".gif"],cancelButtonText:"cancel",submitButtonText:"submit",maxFileSize:1024e3,open:this.props.isOpen,onClose:function(){return e.props.toggleOpen()},onSave:function(t){e.handleChange(t),e.props.toggleOpen()},showPreviews:!0,showFileNamesInPreview:!1})}}]),n}(r.Component),Zt=n(173),Xt=n.n(Zt),Qt=n(174),$t=n.n(Qt),en=n(172),tn=n.n(en),nn=n(313),rn=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={cover:null},e.setCoverFromProps=function(){var t=e.props.card.cover;t||(t={id:null,value:null}),e.setState({cover:t})},e.colors=[{id:101,value:"#cd9fcb"},{id:102,value:"#a7ead1"},{id:103,value:"#ffb787"},{id:104,value:"#f6c1d2"},{id:105,value:"#fd7967"},{id:106,value:"#8f79a8"},{id:107,value:"#b5daf6"},{id:108,value:"#a7a7a7"},{id:109,value:"#ab8597"}],e.onSelectCover=function(){var t=Object(N.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r={id:n.id,color:n.value,src:n.src},e.setState({cover:r},e.props.onUpdate(r));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemoveCover=function(){e.setState({cover:null},(function(){console.log(e.state.cover),e.props.onUpdate(e.state.cover)}))},e.getImageEls=function(){var t=e.props.card.attachments;if(!t)return Object(C.jsx)(a.a.Fragment,{});var n=t.map((function(t){var n="single-image-choice";return e.state.cover.id===t.id&&(n+=" selected"),Object(C.jsx)("div",{className:n,onClick:function(){return e.onSelectCover(t)},style:{backgroundImage:"url(".concat(t.src,")")}},t.id)}));return Object(C.jsxs)(a.a.Fragment,{children:[Object(C.jsx)("h6",{children:"Images"}),Object(C.jsx)("div",{className:"image-choice",children:n})]})},e.getColorEls=function(){return e.colors.map((function(t){var n="color-choice";return e.state.cover.id===t.id&&(n+=" selected"),Object(C.jsx)("div",{className:n,onClick:function(){return e.onSelectCover(t)},style:{backgroundColor:t.value}},t.id)}))},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.setCoverFromProps()}},{key:"render",value:function(){return this.state.cover?Object(C.jsx)(Oe.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"right"},open:!0,anchorEl:this.props.anchorEl.current,onClose:this.props.toggleList,onBackdropClick:this.props.toggleList,children:Object(C.jsxs)("div",{className:"cover-selector-container",children:[Object(C.jsxs)("div",{className:"cover-selector-header flex justify-center",children:[Object(C.jsx)("h5",{children:"Cover"}),Object(C.jsx)(nn.a,{className:"close-cover-modal",onClick:this.props.toggleList})]}),Object(C.jsxs)("div",{className:"cover-selector-colors",children:[Object(C.jsx)("h6",{children:"Colors"}),Object(C.jsx)("div",{className:"color-selection",children:this.getColorEls()})]}),Object(C.jsx)("div",{className:"cover-selector-images",children:this.getImageEls()}),Object(C.jsx)("div",{className:"cover-remove-container",children:Object(C.jsx)("button",{className:"cancel-btn",onClick:this.onRemoveCover,children:"Remove Cover"})})]})}):Object(C.jsx)(a.a.Fragment,{})}}]),n}(r.Component),an=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={card:null,groupId:null,groupName:null,commentsOnly:!1,isLabelPaletteShowing:!1,isCoverSelectorShown:!1,isUploading:!1,isUploadZoneOpen:!1},e.ref=a.a.createRef(),e.getCardDetails=function(){console.log("Get card details "+e.props.cardId);var t=!1;e.props.board.groups.forEach((function(n){n.cards.forEach((function(r){if(r.id===e.props.cardId){var a=n.id,s=n.title;return t=!0,console.log("Found card "+e.props.cardId),void e.setState({groupId:a,groupName:s,card:r})}}))})),t||console.log("Could not find card")},e.toggleCoverSelector=function(){return e.state.isCoverSelectorShown?e.setState({isCoverSelectorShown:!1}):e.setState({isCoverSelectorShown:!0})},e.onCloseCard=function(){e.props.history.push("/board/".concat(e.props.board._id))},e.submitCard=function(t,n){return new Promise((function(r){e.props.updateCard(e.props.board,t,n).then((function(){return r()}))}))},e.onUpdateDesc=function(){var t=Object(N.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=Object(d.a)({},e.state.card)).description=n,e.setState({card:r},Object(N.a)(S.a.mark((function t(){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.createActivity("updated the description"),e.submitCard(r,n);case 2:case"end":return t.stop()}}),t)}))));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onUpdateCover=function(t){var n=Object(d.a)({},e.state.card);n.cover=t,e.setState({card:n},Object(N.a)(S.a.mark((function t(){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.createActivity("updated the cover"),e.submitCard(n,r);case 2:case"end":return t.stop()}}),t)}))))},e.onAddCardMember=function(t){var n=JSON.parse(JSON.stringify(e.state.card.members));n.unshift(t),e.onChangeMembers(n,"added a member")},e.onRemoveCardMember=function(t){var n=JSON.parse(JSON.stringify(e.state.card.members));n=n.filter((function(e){return e._id!=t._id})),e.onChangeMembers(n,"removed a member")},e.onChangeMembers=function(t,n){var r=Object(d.a)({},e.state.card);r.members=t,console.log(t),e.setState({card:r},(function(){var t=e.createActivity(n);e.submitCard(r,t)}))},e.getCardCover=function(){var t=e.state.card.cover;return t?t.src?Object(C.jsxs)("div",{className:"card-details-cover-image",style:{backgroundImage:"url(".concat(t.src,")")},children:[t&&Object(C.jsx)(J.a,{onClick:e.onCloseCard,"aria-label":"close",className:"card-details-cover-modal-close",children:Object(C.jsx)(nt.a,{})}),t&&Object(C.jsxs)("button",{className:"sidebar-button-with-cover",ref:e.ref,onClick:e.toggleCoverSelector,children:[Object(C.jsx)(_t.a,{}),Object(C.jsx)("span",{children:"Cover"})]})]}):Object(C.jsxs)("div",{className:"card-details-cover-color",style:{backgroundColor:t.color},children:[t&&Object(C.jsx)(J.a,{onClick:e.onCloseCard,"aria-label":"close",className:"card-details-cover-modal-close",children:Object(C.jsx)(nt.a,{})}),t&&Object(C.jsxs)("button",{className:"sidebar-button-with-cover",ref:e.ref,onClick:e.toggleCoverSelector,children:[Object(C.jsx)(_t.a,{}),Object(C.jsx)("span",{children:"Cover"})]})]}):Object(C.jsx)(a.a.Fragment,{})},e.onAddComment=function(t){var n={txt:"",commentTxt:t,card:{id:e.state.card.id,title:e.state.card.title}},r=D.a.createActivity(n);e.props.addActivity(e.props.board,r)},e.createActivity=function(t){var n={txt:t,commentTxt:"",card:{id:e.state.card.id,title:e.state.card.title}};return console.log("CREATING ACTIVITY FOR CARD "+JSON.stringify(n)),D.a.createActivity(n)},e.toggleCommentsOnly=function(){return e.state.commentsOnly?e.setState({commentsOnly:!1}):e.setState({commentsOnly:!0})},e.getFilteredActivities=function(){var t=e.state.card,n=e.props.board.activities;if(!n)return[];var r=n.filter((function(e){return e.card.id===t.id}));return e.state.commentsOnly&&(r=r.filter((function(e){if(console.log(JSON.stringify(e)),e.commentTxt)return e}))),r},e.onUpdateTitle=function(){var t=Object(N.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=Object(d.a)({},e.state.card)).title=n,e.setState({card:r},Object(N.a)(S.a.mark((function t(){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.createActivity("updated the title"),e.submitCard(r,n);case 2:case"end":return t.stop()}}),t)}))));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onUpdateDueDate=function(){var t=Object(N.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=Object(d.a)({},e.state.card)).dueDate=n,e.setState({card:r},Object(N.a)(S.a.mark((function t(){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.createActivity("updated due date"),t.next=3,e.submitCard(r,n);case 3:case"end":return t.stop()}}),t)}))));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onUpdateChecklists=function(t,n){var r=Object(d.a)({},e.state.card);r.checklists||(r.checklists=[]),r.checklists.findIndex((function(e){return e.id===t.id}))>=0?r.checklists=r.checklists.map((function(e){return e.id===t.id?t:e})):r.checklists.push(t),r.checklists=r.checklists.filter((function(e){if(e.title)return e})),e.setState({card:r},(function(){if(n){var t=e.createActivity(n);e.submitCard(r,t)}else e.submitCard(r)}))},e.getLabels=function(){var t=e.state.card.labels;return t&&t.length?Object(C.jsxs)("div",{className:"card-details-label-container",children:[Object(C.jsx)("h4",{children:"Labels"}),Object(C.jsx)(Ge,{onClickLabel:e.openEditLabelsModal,cardLabels:t,boardLabels:e.props.board.labels,preview:!1})]}):Object(C.jsx)(a.a.Fragment,{})},e.toggleLabelPalette=function(){e.setState({isLabelPaletteShowing:!e.state.isLabelPaletteShowing})},e.renderAttachments=function(e){return Object(C.jsxs)("div",{children:[Object(C.jsx)("section",{class:"flex justify-space-between",children:Object(C.jsxs)("div",{class:"flex",children:[Object(C.jsx)(tn.a,{}),Object(C.jsx)("h3",{children:"Attachments"})]})}),Object(C.jsx)("img",{className:"card-details-img-attach",src:e})]})},e.setUploading=function(){return new Promise((function(t){e.setState({isUploading:!0},t(!0))}))},e.onAddImage=function(t){var n=D.a.createImage(t),r=Object(d.a)({},e.state.card);r.attachments||(r.attachments=[]),r.attachments.push(n);var a=e.createActivity("added an image");e.setState({card:r},Object(N.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.submitCard(r,a);case 2:e.setState({isUploading:!1});case 3:case"end":return t.stop()}}),t)}))))},e.onUpdateAttachments=function(){var t=Object(N.a)(S.a.mark((function t(n){var r,a,s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Object(d.a)({},e.state.card),a=r.attachments.findIndex((function(e){return e.id===n.id})),n.title.length?r.attachments[a]=n:r.attachments.splice(a,1),s=n.title.length?e.createActivity("edited the title of an image"):e.createActivity("removed an image"),e.setState({card:r},(function(){e.submitCard(r,s)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleUploadDropzone=function(){return e.state.isUploadZoneOpen?e.setState({isUploadZoneOpen:!1}):e.setState({isUploadZoneOpen:!0})},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("Did mount boardId: "+this.props.boardId+" cardId"+this.props.cardId),this.props.boardId&&this.props.cardId&&this.props.loadBoard(this.props.boardId).then((function(){console.log("After then"),e.getCardDetails()}))}},{key:"componentDidUpdate",value:function(e,t){e.cardId!==this.props.cardId&&this.getCardDetails()}},{key:"render",value:function(){return this.state.card?Object(C.jsx)("section",{className:"card-details-modal flex column",children:Object(C.jsxs)("div",{className:"modal-content",children:[this.getCardCover(),Object(C.jsxs)("div",{className:"card-details-modal-container",children:[Object(C.jsxs)("div",{className:"card-modal-title flex justify-space-between",children:[Object(C.jsxs)("div",{className:"card-details-title flex",children:[Object(C.jsx)(Xt.a,{}),Object(C.jsxs)("div",{children:[Object(C.jsx)(xt,{titleTxt:this.state.card.title,onUpdate:this.onUpdateTitle}),Object(C.jsx)("div",{className:"in-list",children:Object(C.jsxs)("span",{className:"group-name",children:["in list ",Object(C.jsx)("u",{children:this.state.groupName})]})})]})]}),!this.state.card.cover&&Object(C.jsx)(J.a,{onClick:this.onCloseCard,"aria-label":"close",id:"modal-close",className:"modal-close",children:Object(C.jsx)(nt.a,{})})]}),Object(C.jsxs)("div",{className:"flex justify-space-between modal-content-wrapper",children:[Object(C.jsxs)("section",{className:"main-modal-section",children:[Object(C.jsxs)("div",{className:"card-details-data",children:[this.getLabels(),this.state.card.dueDate?Object(C.jsxs)("div",{children:[Object(C.jsx)("h4",{children:"Due Date"}),Object(C.jsx)(Ne,{onUpdateDueDate:this.onUpdateDueDate,dueDate:this.state.card.dueDate,displayDate:!0,displayTime:!0})]}):Object(C.jsx)(a.a.Fragment,{})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)(Wt,{onUpdate:this.onUpdateAttachments,attachments:this.state.card.attachments}),Object(C.jsx)(bt,{onUpdateDesc:this.onUpdateDesc,description:this.state.card.description}),Object(C.jsx)(It,{checklists:this.state.card.checklists,onUpdate:this.onUpdateChecklists}),Object(C.jsx)(qt,{onAddImage:this.onAddImage,setUploading:this.setUploading,toggleOpen:this.toggleUploadDropzone,isOpen:this.state.isUploadZoneOpen})]})]}),Object(C.jsx)(Vt,{anchorRef:this.ref,ref:this.ref,addActivity:this.createActivity,isUploading:this.state.isUploading,toggleCoverSelector:this.toggleCoverSelector,toggleUploadDropzone:this.toggleUploadDropzone,toggleDisplayMembers:this.toggleDisplayMembers,dueDate:this.state.card.dueDate,toggleLabelPalette:this.toggleLabelPalette,onUpdateDueDate:this.onUpdateDueDate,onArchiveCard:this.onArchiveCard,onUpdateChecklists:this.onUpdateChecklists,members:this.state.card.members,onAddCardMember:this.onAddCardMember,onRemoveCardMember:this.onRemoveCardMember,allUsers:this.props.allUsers,card:this.state.card})]}),Object(C.jsxs)("div",{children:[Object(C.jsxs)("section",{className:"flex justify-space-between",children:[Object(C.jsxs)("div",{className:"flex modal-activity-title",children:[Object(C.jsx)($t.a,{}),Object(C.jsx)("h3",{children:"Activity"})]}),Object(C.jsx)("button",{onClick:this.toggleCommentsOnly,children:this.state.commentsOnly?"Show Details":"Hide Details"})]}),Object(C.jsx)(mt,{onAddComment:this.onAddComment}),Object(C.jsx)(Ot,{boardId:this.props.board._id,displayMode:"card",activities:this.getFilteredActivities()})]}),Object(C.jsx)(Oe.a,{anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"left"},open:this.state.isLabelPaletteShowing,anchorEl:this.ref.current,onClose:this.toggleLabelPalette,onBackdropClick:this.toggleLabelPalette,children:Object(C.jsx)(ee,{createActivity:this.createActivity,card:this.state.card})}),this.state.isCoverSelectorShown&&Object(C.jsx)(rn,{card:this.state.card,anchorEl:this.ref,onUpdate:this.onUpdateCover,toggleList:this.toggleCoverSelector})]})]})}):""}}]),n}(r.Component),sn={loadBoard:I,updateCard:L,addActivity:F},cn=Object(i.b)((function(e){return{board:e.boardModule.currBoard,allUsers:e.userModule.users,members:e.boardModule.currBoard.members}}),sn)(Object(i.b)(j.f)(an)),on=n(175),ln=n.n(on),dn=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={txt:"",isEditing:!1},e.onChangeText=function(t){var n=t.target.value;e.setState({txt:n})},e.onSubmit=function(t){t.preventDefault(),e.state.txt&&(e.setNotEditing(),e.props.onUpdate(e.state.txt))},e.setEditing=function(){e.setState({isEditing:!0})},e.setNotEditing=function(){e.setState({isEditing:!1})},e.getIsEditing=function(){return e.state.isEditing?Object(C.jsx)("form",{onBlur:e.setNotEditing,onSubmit:e.onSubmit,children:Object(C.jsx)("input",{name:"header",type:"text",autoFocus:!0,value:e.state.txt,onChange:e.onChangeText})}):Object(C.jsx)("div",{onClick:e.setEditing,children:Object(C.jsx)("h2",{className:"proj-title btn",children:e.state.txt})})},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.titleTxt;this.setState({txt:e})}},{key:"componentDidUpdate",value:function(e,t){e.titleTxt!=this.props.titleTxt&&this.setState({txt:this.props.titleTxt})}},{key:"render",value:function(){return Object(C.jsx)("div",{children:this.getIsEditing()})}}]),n}(r.Component),un=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onUpdateBoardTitle=function(t){e.props.updateBoardTitle(e.props.board,t)},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(N.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(C.jsxs)("div",{className:"board-header-container flex justify-space-between wrap",children:[Object(C.jsxs)("div",{className:"board-nav-left flex align-center",children:[Object(C.jsx)(dn,{titleTxt:this.props.board.title,onUpdate:this.onUpdateBoardTitle}),Object(C.jsx)("div",{className:"members-container",children:Object(C.jsx)(Lt,{members:this.props.members,allUsers:this.props.allUsers})}),Object(C.jsxs)("div",{className:"btn",children:[Object(C.jsx)("span",{className:"material-icons",children:"person_add"}),"Invite"]})]}),Object(C.jsxs)("div",{className:"board-nav-right flex ",children:[Object(C.jsx)("button",{className:"notification-icon flex",children:Object(C.jsx)(ln.a,{})}),Object(C.jsxs)("button",{onClick:function(){return e.props.onToggleSidebar(!0)},children:[Object(C.jsx)("span",{className:"material-icons",children:"more_horiz"}),"Show menu"]})]})]})}}]),n}(r.Component),pn={loadAllUsers:je,updateBoardTitle:function(e,t){return function(){var n=Object(N.a)(S.a.mark((function n(r){var a;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(a=JSON.parse(JSON.stringify(e))).title=t,r({type:"SET_BOARD",board:a}),n.next=5,D.a.updateBoard(a);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},bn=Object(i.b)((function(e){return{board:e.boardModule.currBoard,allUsers:e.userModule.users}}),pn)(un),hn=n(176),jn=n.n(hn),fn=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={colorSelected:""},e.colorSelected=function(t){if(e.state.colorSelected!==t){e.setState({colorSelected:t});var n=e.props.board;n.style.bgImg=null,n.style.boardColor=t,e.props.style.bgImg=null,e.props.style.boardColor=t,e.props.updateBoard(n)}},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return Object(C.jsx)("section",{className:"image-gallery",children:["rgb(0, 121, 191)","rgb(210, 144, 52)","rgb(81, 152, 57)","rgb(176, 70, 50)","rgb(137, 96, 158)","rgb(205, 90, 145)","rgb(75, 191, 107)","rgb(0, 174, 204)","rgb(131, 140, 145)"].map((function(t){return Object(C.jsx)("div",{className:"image",onClick:function(){e.colorSelected(t)},style:{backgroundColor:t}})}))})}}]),n}(r.Component),mn={setStyle:M,updateBoard:T},vn=Object(i.b)((function(e){return{board:e.boardModule.currBoard,style:e.boardModule.style}}),mn)(fn),gn=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={imgSelected:""},e.imgSelected=function(t){if(e.state.imgSelected!==t){e.setState({imgSelected:t});var n=e.props.board;n.style.bgImg=t,e.props.style.bgImg=t,e.props.updateBoard(n)}},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return Object(C.jsx)("section",{className:"image-gallery",children:["url(http://avante.biz/wp-content/uploads/Tab-HD-Wallpapers/Tab-HD-Wallpapers-001.jpg)","url(http://avante.biz/wp-content/uploads/Wonderful-Desktop-Wallpapers/Wonderful-Desktop-Wallpapers-005.jpg","url(http://avante.biz/wp-content/uploads/Wonderful-Desktop-Wallpapers/Wonderful-Desktop-Wallpapers-014.jpg)","url(http://avante.biz/wp-content/uploads2/Summer-Nature-Desktop-HD-1/Summer-Nature-Desktop-HD-8.jpg)","url(http://avante.biz/wp-content/uploads2/Summer-Nature-Desktop-HD-1/Summer-Nature-Desktop-HD-1.jpg)","url(http://avante.biz/wp-content/uploads/Wonderful-Desktop-Wallpapers/Wonderful-Desktop-Wallpapers-033.jpg)","url(http://avante.biz/wp-content/uploads/Wonderful-Desktop-Wallpapers/Wonderful-Desktop-Wallpapers-010.jpg)","url(http://avante.biz/wp-content/uploads2/Summer-Nature-Desktop-HD-1/Summer-Nature-Desktop-HD-6.jpg)","url(http://avante.biz/wp-content/uploads/Wonderful-Desktop-Wallpapers/Wonderful-Desktop-Wallpapers-032.jpg)","url(http://avante.biz/wp-content/uploads/Outer-space-wallpaper-for-mac/Outer-space-wallpaper-for-mac15.jpg)","url(http://avante.biz/wp-content/uploads/Outer-space-wallpaper-for-mac/Outer-space-wallpaper-for-mac13.jpg)","url(http://avante.biz/wp-content/uploads2/Autumn-Street-Wallpapers-Desktop-1/Autumn-Street-Wallpapers-Desktop-45.jpg)"].map((function(t){return Object(C.jsx)("div",{className:"image",onClick:function(){e.imgSelected(t)},style:{backgroundImage:t}},t)}))})}}]),n}(r.Component),On={setStyle:M,updateBoard:T},xn=Object(i.b)((function(e){return{board:e.boardModule.currBoard,style:e.boardModule.style}}),On)(gn),yn=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={chooseBackground:""},e.onSelect=function(t){e.setState({chooseBackground:t}),console.log(t)},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return Object(C.jsxs)("section",{className:"change-background-container",children:[Object(C.jsx)("hr",{className:"side-menu-divider"}),""===this.state.chooseBackground&&Object(C.jsxs)("div",{className:"change-backgrounds-inier-container",children:[Object(C.jsxs)("div",{className:"board-backgrounds-section-tile board-backgrounds-photos-tile",onClick:function(){e.onSelect("Photos")},children:[Object(C.jsx)("div",{className:"image"}),Object(C.jsx)("div",{className:"title",children:"Photos"})]}),Object(C.jsxs)("div",{className:"board-backgrounds-section-tile board-backgrounds-colors-tile",onClick:function(){e.onSelect("Colors")},children:[Object(C.jsx)("div",{className:"image"}),Object(C.jsx)("div",{className:"title",children:"Colors"})]})]}),"Photos"===this.state.chooseBackground&&Object(C.jsx)(xn,{}),"Colors"===this.state.chooseBackground&&Object(C.jsx)(vn,{})]})}}]),n}(r.Component),wn=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),{})(yn),Cn=n(96),kn=n.n(Cn),Sn=n(177),Nn=n.n(Sn),Dn=n(178),An=n.n(Dn),En=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={sideBarTitle:""},e.titleClicked=function(t){e.setState({sideBarTitle:t})},e.DynamicCmp=function(){switch(e.state.sideBarTitle){case"Change background":return Object(C.jsx)(wn,{});case null:default:return Object(C.jsx)(a.a.Fragment,{})}},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(N.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({sideBarTitle:"Menu"});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(C.jsxs)("div",{className:"side-bar-container flex column align-center",children:[console.log("side bar in"),Object(C.jsxs)("div",{className:"side-bar-header flex align-center",children:["Menu"!==this.state.sideBarTitle&&Object(C.jsx)("button",{className:"Navigat-side-bar",onClick:function(){e.titleClicked("Menu")},children:Object(C.jsx)(jn.a,{})}),Object(C.jsx)("h3",{className:"menu-title",children:this.state.sideBarTitle}),Object(C.jsx)("button",{className:"close-side-bar",onClick:function(){e.props.onToggleSidebar(!1)},children:Object(C.jsx)(nt.a,{})})]}),Object(C.jsxs)("div",{className:"side-bar-inside-container",children:["Menu"===this.state.sideBarTitle&&Object(C.jsxs)("div",{className:"side-bar-inside-menu-container",children:[Object(C.jsx)("hr",{className:"side-menu-divider"}),Object(C.jsxs)("ul",{className:"side-menu-list clean-list",children:[Object(C.jsxs)("li",{onClick:function(){e.titleClicked("About this board")},children:[Object(C.jsx)("span",{children:Object(C.jsx)(kn.a,{})}),"About this board"]}),Object(C.jsxs)("li",{onClick:function(){e.titleClicked("Change background")},children:[Object(C.jsx)("span",{children:Object(C.jsx)(Nn.a,{})}),"Change background"]}),Object(C.jsxs)("li",{onClick:function(){e.titleClicked("Board analysis")},children:[Object(C.jsx)("span",{children:Object(C.jsx)(An.a,{})}),"Board analysis"]})]}),Object(C.jsx)("hr",{className:"side-menu-divider"})]}),this.DynamicCmp()]})]})}}]),n}(r.Component),Bn=Object(i.b)((function(e){return{board:e.boardModule.currBoard,allUsers:e.userModule.users}}),{})(En),In=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={lastReceivedUpdateAt:"",isSidebarShowing:!1},e.onAddGroup=function(e){return e},e.onToggleSidebar=function(t){e.setState({isSidebarShowing:t})},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(N.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.boardId,A.a.setup(),e.next=4,this.props.loadBoard(t);case 4:this.props.setStyle(this.props.board.style),this.props.loadAllUsers();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(N.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.board;return Object(C.jsx)(a.a.Fragment,{children:Object(C.jsxs)("div",{className:"board-app board-container flex column",children:[this.props.match.params.cardId?Object(C.jsx)(cn,{cardId:this.props.match.params.cardId,boardId:this.props.match.params.boardId,history:this.props.history}):Object(C.jsx)("div",{}),Object(C.jsx)(bn,{title:e.title,members:e.members,onToggleSidebar:this.onToggleSidebar,style:e.style,users:this.props.allUsers,lastUpdate:this.state.lastReceivedUpdateAt}),this.state.isSidebarShowing&&Object(C.jsx)(Bn,{onToggleSidebar:this.onToggleSidebar}),Object(C.jsx)(dt,{groups:this.props.board.groups,onAddGroup:this.onAddGroup,history:this.props.history,style:e.style})]})})}}]),n}(r.Component);var Mn={loadBoard:I,onRemoveGroup:U,updateBoard:T,loadAllUsers:je,setStyle:M},Tn=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),Mn)(In),Un=n(179),Ln=n.n(Un);function Fn(e){var t=e.board,n=t.style.bgImg,r=t.style.boardColor;return Object(C.jsx)(o.b,{to:"/board/".concat(t._id),children:Object(C.jsx)("div",{className:"template board",style:n?{backgroundImage:n}:{backgroundColor:r},children:Object(C.jsx)("span",{className:"board-title-preview",children:t.title})})})}var Pn=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return Object(C.jsx)("div",{className:"new-board-color ".concat(this.props.isSelected?"colorSelected":""),style:{backgroundColor:"".concat(this.props.color)},onClick:function(){return e.props.onSetColor(e.props.color)}})}}]),n}(r.Component),Rn=[{id:"bc101",name:"green",color:"#519839"},{id:"bc102",name:"yellow",color:"#D29034"},{id:"bc103",name:"blue",color:"#0079BF"},{id:"bc104",name:"brown",color:"#B04632"},{id:"bc105",name:"purple",color:"#89609E"},{id:"bc106",name:"pink",color:"#CD5A91"},{id:"bc107",name:"lightGreen",color:"#4BBF6B"},{id:"bc108",name:"teal",color:"#49A9D7"}],_n=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={selectedColor:null,newBoardName:""},e.onSetColor=function(t){e.setState({selectedColor:t})},e.handleChange=function(t){e.setState({newBoardName:t.target.value})},e.onSubmit=function(){var t=Object(N.a)(S.a.mark((function t(n){var r,a,s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=e.state.selectedColor,a=e.state.newBoardName,console.log("koko",a,r),a){t.next=6;break}return t.abrupt("return",alert("Board name is required"));case 6:return t.next=8,e.props.addNewBoard(a,r);case 8:return s=t.sent,console.log("Adsnewboard.jsx",s),e.props.redirectPath(s._id),t.next=13,e.props.loadBoard(s._id);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.setState({selectedColor:null,newBoardName:""})}},{key:"isSelected",value:function(e){return this.state.selectedColor===e}},{key:"render",value:function(){var e=this;return Object(C.jsxs)("div",{className:"create-new-board",children:[Object(C.jsxs)("div",{className:"notification-preview-header",children:[Object(C.jsx)("div",{}),Object(C.jsx)("div",{children:Object(C.jsx)("h6",{children:"Create Board"})}),Object(C.jsx)(J.a,{onClick:this.props.onCloseModal,children:Object(C.jsx)(nn.a,{style:{color:"rgb(54, 52, 52)"}})})]}),Object(C.jsx)("input",{onChange:this.handleChange,type:"text",placeholder:"New Board's Name",autoFocus:!0}),Object(C.jsx)("div",{className:"new-board-colors-container",children:Rn.map((function(t){return Object(C.jsx)(Pn,{color:t.color,onSetColor:e.onSetColor,isSelected:e.isSelected(t.color)},t.id)}))}),Object(C.jsx)("button",{onClick:this.onSubmit,children:"Add New Board"})]})}}]),n}(r.Component),Gn={addNewBoard:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#519839";return function(){var n=Object(N.a)(S.a.mark((function n(r){var a;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,D.a.addNewBoard(e,t);case 2:return a=n.sent,r({type:"SET_BOARD",board:a}),n.abrupt("return",a);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},loadBoard:I,setDefaultStyle:function(){return function(){var e=Object(N.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"SET_DEFAULT_STYLE"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Jn=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),Gn)(_n),Vn=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={isCreateBoardOpen:!1},e.onRedirect=function(t){e.onCloseCreateBoard(),e.props.history.push("/board/".concat(t))},e.openNewBoardModal=function(){e.setState({isCreateBoardOpen:!0})},e.onCloseCreateBoard=function(){e.setState({isCreateBoardOpen:!1})},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(N.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadBoards();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fn",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.boards;return Object(C.jsx)("section",{className:"boards-page-bg flex column ",children:Object(C.jsxs)("div",{className:"main-boards",children:[Object(C.jsx)("div",{className:"flex justify-space-between align-center",children:Object(C.jsx)("h3",{children:"Your Boards"})}),Object(C.jsxs)("section",{className:"select-board-container flex wrap",children:[Object(C.jsx)("div",{className:"create-new-board",onClick:function(){e.openNewBoardModal()},children:Object(C.jsxs)("div",{className:"new-board-text flex align-center",children:[Object(C.jsx)(Ln.a,{}),Object(C.jsx)("p",{children:"Create new board"})]})}),this.state.isCreateBoardOpen&&Object(C.jsx)(Jn,{onCloseModal:this.onCloseCreateBoard,redirectPath:this.onRedirect}),t.map((function(e){return Object(C.jsx)(Fn,{board:e},e._id)}))]}),Object(C.jsx)("h3",{className:"popular-title",children:"Popular templates"}),Object(C.jsx)("section",{className:"select-board-container flex wrap",children:Object(C.jsx)("section",{className:"select-board-container flex wrap",children:t.map((function(e){return Object(C.jsx)(Fn,{board:e},e._id)}))})})]})})}}]),n}(r.Component);var zn={loadBoards:function(){return function(){var e=Object(N.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.query();case 3:n=e.sent,t({type:"SET_BOARDS",boards:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("ReviewActions: err in loadBoards",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},removeBoard:function(e){return function(){var t=Object(N.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.remove(e);case 3:n({type:"REMOVE_REVIEW",boardId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("ReviewActions: err in removeBoard",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}},Wn=[{path:"/board/:boardId/card/:cardId",component:Tn},{path:"/board/:boardId",component:Tn},{path:"/board",component:Object(i.b)((function(e){return{boards:e.boardModule.boards}}),zn)(Vn)},{path:"/",component:function(){return Object(C.jsxs)("section",{className:"home flex column align-center justify-center",children:[Object(C.jsxs)("header",{className:"home-pg-header flex justify-space-between align-center",children:[Object(C.jsx)("img",{src:w,className:"logo-img-left"}),Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsx)(o.c,{to:"/",className:"login-btn",children:"Log in"}),Object(C.jsx)(o.c,{to:"/",className:"signup-btn",children:"Sign up"})]})]}),Object(C.jsxs)("section",{className:"welcome-container hero flex justify-space-between",children:[Object(C.jsxs)("div",{className:"introduction slide-right",children:[Object(C.jsx)("h1",{children:"Welcome to Treelo"}),Object(C.jsx)("div",{className:"intro-text",children:Object(C.jsx)("p",{children:"Manage projects, organize tasks, and build team spirit\u2014all in one place. Explore our many features of project and task oriented management for higher efficiency."})}),Object(C.jsx)(o.c,{to:"/board/",className:"tryit",children:"Try It now! \u2192"})]}),Object(C.jsx)("div",{className:"img-container",children:Object(C.jsx)("img",{src:y,className:"slide-left home-img"})})]}),Object(C.jsxs)("section",{className:"home-pg-text",children:[Object(C.jsx)("img",{src:"https://i.ibb.co/BVwnK1J/kisspng-environmentally-friendly-recycling-image-sustainab-government-flooring-flooring-concepts-inc.png",className:"img-container earth-img"}),Object(C.jsx)("h2",{children:"Sick of replacing white board markers every week?"}),Object(C.jsx)("h2",{children:"Lost in the paper-towers? Save a tree, and your time!"}),Object(C.jsx)("h2",{children:"Be innovative, increase productivity by bringing new technology and tools into your organization."}),Object(C.jsx)("h2",{children:"Receive live updates from team-mates and make faster progress then ever."})]}),Object(C.jsxs)("section",{className:"about-wrapper flex column",children:[Object(C.jsx)("h2",{className:"about-us-title",children:"Contact me"}),Object(C.jsx)("div",{className:"about-us-container flex justify-center align-center wrap",children:Object(C.jsxs)("div",{className:"about-me-container",children:[Object(C.jsx)("div",{className:"about-me koral"}),Object(C.jsx)("h3",{children:"Koral Sabbah"}),Object(C.jsx)("h3",{children:"Full-Stack Developer"}),Object(C.jsx)("hr",{}),Object(C.jsx)("h5",{children:"koral762@gmail.com | 050-7620101"}),Object(C.jsxs)("div",{className:"links-container",children:[Object(C.jsx)("a",{href:"https://www.facebook.com/koral.benabu.5",target:"blank",children:Object(C.jsx)(m.a,{className:"facebook-icon"})}),Object(C.jsx)("a",{href:"https://www.linkedin.com/in/%F0%9D%90%8A%F0%9D%90%A8%F0%9D%90%AB%F0%9D%90%9A%F0%9D%90%A5-%F0%9D%90%92%F0%9D%90%9A%F0%9D%90%9B%F0%9D%90%9B%F0%9D%90%9A%F0%9D%90%A1-%F0%91%81%8D-%F0%9D%90%81%F0%9D%90%9E%F0%9D%90%A7-%F0%9D%90%9A%F0%9D%90%9B%F0%9D%90%AE-%F0%91%81%8D-2b8172188/",target:"blank",children:Object(C.jsx)(g.a,{className:"linkedin-icon"})}),Object(C.jsx)("a",{href:"mailto:koral762@gmail.com",target:"blank",children:Object(C.jsx)(x.a,{className:"mail-icon"})})]})]})})]})]})}}],Hn=n(180),Kn=n.n(Hn),Yn=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={isNewBoardModalShown:!1,isLoginDrawerShown:!1,isUserDetailsOpen:!1,loggedinUser:null},e.toggleModal=function(){e.setState({isNewBoardModalShown:!e.state.isNewBoardModalShown})},e.onCloseModal=function(){e.setState({isNewBoardModalShown:!1})},e.redirectPath=function(t){e.props.history.replace("/"),e.props.history.replace("/board/".concat(t)),e.onCloseModal()},e.showLoginDrawer=function(t){t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),e.setState({isLoginDrawerShown:!0})},e.hideLoginDrawer=function(t){t&&t.stopPropagation(),e.setState({isLoginDrawerShown:!1})},e.onOpenUserDetails=function(){console.log("open"),e.setState({isUserDetailsOpen:!0})},e.onCloseUserDetails=function(){e.setState({isUserDetailsOpen:!1})},e.onLogout=function(){var t=Object(N.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.stopPropagation(),t.next=3,e.props.logout();case 3:e.setState({isUserDetailsOpen:!1});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.setState({loggedinUser:ce.getLoggedinUser()})}},{key:"render",value:function(){return Object(C.jsx)(a.a.Fragment,{children:Object(C.jsxs)("div",{className:"flex justify-space-between app-header align-center",children:[Object(C.jsxs)("div",{className:"right-side flex",children:[Object(C.jsxs)("div",{className:"header-icons flex",children:[Object(C.jsx)("div",{children:Object(C.jsx)(o.c,{to:"/",children:Object(C.jsx)("span",{className:"material-icons btn",children:"home"})})}),Object(C.jsx)("div",{children:Object(C.jsx)(o.c,{to:"/board",children:Object(C.jsxs)("button",{className:"flex align-center btn",children:[Object(C.jsx)(Kn.a,{}),Object(C.jsx)("span",{className:"boards-btn",children:"Boards"})]})})})]}),Object(C.jsx)("input",{className:"btn board-nav-filter",type:"text",placeholder:"Search..."})]}),Object(C.jsx)("img",{src:w,className:"logo-img"})]})})}}]),n}(r.Component),qn={onLogout:fe},Zn=Object(i.b)((function(e){return{}}),qn)(Yn),Xn=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onDragStart=function(){e.props.resetFilterBy(e.props.board._id)},e.onDragEnd=function(t){var n=t.destination,r=t.source,a=t.draggableId,s=t.type;if(n&&(n.droppableId!==r.droppableId||n.index!==r.index)&&a){if("card"===s){var c=e.props.board.groups.findIndex((function(e){return e.id===r.droppableId})),o=e.props.board.groups.findIndex((function(e){return e.id===n.droppableId}));if(r.droppableId===n.droppableId){var i=e.props.board.groups.find((function(e){return e.id===r.droppableId})),u=i.cards.find((function(e){return e.id===a})),p=Array.from(i.cards);p.splice(r.index,1),p.splice(n.index,0,u);var b=Object(d.a)(Object(d.a)({},i),{},{cards:p}),h=Object(l.a)(e.props.board.groups);h[c]=b;var j=Object(d.a)(Object(d.a)({},e.props.board),{},{groups:h});return void e.props.updatePosition(j)}if(r.droppableId!==n.droppableId){var f=e.props.board.groups.find((function(e){return e.id===n.droppableId})),m=e.props.board.groups.find((function(e){return e.id===r.droppableId})),v=e.props.board.groups.find((function(e){return e.id===n.droppableId})),g=m.cards.find((function(e){return e.id===a}));g||(g=v.cards.find((function(e){return e.id===a})));var O=m.cards.findIndex((function(e){return e.id===a})),x=Array.from(f.cards),y=g.timeAnalysis;y&&(y.timeInGroupsMap[y.currGroup.groupId]=y.timeInGroupsMap[y.currGroup.groupId]+(Date.now()-y.currGroup.enteredAt)||Date.now()-y.currGroup.enteredAt,y.currGroup={groupId:f.id,enteredAt:Date.now()}),x.splice(n.index,0,g),m.cards.splice(O,1);var w=Object(l.a)(e.props.board.groups);w[c]=m,w[o].cards=x;var C=Object(d.a)(Object(d.a)({},e.props.board),{},{groups:w});e.props.updatePosition(C,a);var k=D.a.getCardTitleById(a,C),S={txt:"moved the card",commentTxt:"",card:{id:a,title:k}},N=D.a.createActivity(S);return void e.props.addActivity(C,N)}}if("group"!==s);else{var A=Array.from(e.props.board.groups),E=e.props.board.groups.find((function(e){return e.id===a}));A.splice(r.index,1),A.splice(n.index,0,E);var B=Object(d.a)(Object(d.a)({},e.props.board),{},{groups:A});e.props.updatePosition(B)}}},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onLogout,n=e.loggedinUser,r=e.style;return Object(C.jsx)(G.a,{onDragEnd:this.onDragEnd,children:Object(C.jsx)("div",{className:"app-bg",style:r.bgImg?{backgroundImage:r.bgImg}:{backgroundColor:r.boardColor},children:Object(C.jsxs)("div",{className:"main-container flex column full",children:[Object(C.jsx)(Zn,{onLogout:t,loggedinUser:n}),Object(C.jsx)(j.c,{className:"content",children:Wn.map((function(e){return Object(C.jsx)(j.a,{exact:!0,component:e.component,path:e.path},e.path)}))})]})})})}}]),n}(r.Component);var Qn={updatePosition:function(e,t){return function(){var t=Object(N.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"SET_BOARD",board:e}),r=JSON.parse(JSON.stringify(e)),t.next=5,D.a.updateBoard(r);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("error updating board",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},resetFilterBy:function(e){return function(){var t=Object(N.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.a.getBoardById(e);case 2:r=t.sent,n({type:"SET_BOARD",board:r}),n({type:"RESET_FILTER_BY"});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},addActivity:F,onLogout:fe},$n=Object(i.b)((function(e){return{loggedinUser:e.userModule.loggedinUser,board:e.boardModule.currBoard,style:e.boardModule.style}}),Qn)(Xn),er=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,319)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))},tr=(n(252),n(47)),nr=n(181),rr={currBoard:{},boards:[],style:{},fullLabel:!1},ar={backgroundImage:null};var sr={loggedinUser:ce.getLoggedinUser(),users:[{_id:"5f6a2528973d861c5d78c355",fullName:"Koral Sabbah",imgUrl:"https://www.linkpicture.com/q/koral.jpg"},{_id:"5f6a2528973d861c5d78c328",fullName:"Ksenia Braginsky",imgUrl:"https://www.linkpicture.com/q/ks.jpg"},{_id:"5f6a2528973d861c5d78c322",fullName:"Miriam Baranovska",imgUrl:"https://www.linkpicture.com/q/mir.jpg"},{_id:"5f6a2528973d861c5d78c323",fullName:"Avi Kohen",imgUrl:"../../imgs/miriam.jpg"}]};var cr=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||tr.d,or=Object(tr.c)({boardModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOARD":return Object(d.a)(Object(d.a)({},e),{},{currBoard:t.board});case"SET_BOARDS":return Object(d.a)(Object(d.a)({},e),{},{boards:t.boards});case"REMOVE_BOARD":return Object(d.a)(Object(d.a)({},e),{},{currBoard:e.currBoard.filter((function(e){return e._id!==t.currBoardId}))});case"SET_DEFAULT_STYLE":return Object(d.a)(Object(d.a)({},e),{},{style:ar});case"SET_STYLE":return Object(d.a)(Object(d.a)({},e),{},{style:t.style});case"TOGGLE_FULL_LABEL":return e.fullLabel?Object(d.a)(Object(d.a)({},e),{},{fullLabel:!1}):Object(d.a)(Object(d.a)({},e),{},{fullLabel:!0});default:return e}},userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":case"SIGN_UP":return Object(d.a)(Object(d.a)({},e),{},{loggedinUser:t.user});case"LOGOUT_USER":return console.log(t.user),Object(d.a)(Object(d.a)({},e),{},{loggedinUser:t.user});default:return e}}}),ir=Object(tr.e)(or,cr(Object(tr.a)(nr.a)));c.a.render(Object(C.jsx)(i.a,{store:ir,children:Object(C.jsx)(o.a,{children:Object(C.jsx)($n,{})})}),document.getElementById("root")),er()},41:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;return new Promise((function(t){setTimeout(t,e)}))},getRandomInt:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}}},53:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(3),a=n.n(r),s=n(7),c=n(150),o="/api/",i=n.n(c).a.create({withCredentials:!0}),l={get:function(e,t){return d(e,"GET",t)},post:function(e,t){return d(e,"POST",t)},put:function(e,t){return d(e,"PUT",t)},delete:function(e,t){return d(e,"DELETE",t)}};function d(e){return u.apply(this,arguments)}function u(){return(u=Object(s.a)(a.a.mark((function e(t){var n,r,s,c=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"get",r=c.length>2&&void 0!==c[2]?c[2]:null,e.prev=2,e.next=5,i({url:"".concat(o).concat(t),method:n,data:r,params:"GET"===n?r:null});case 5:return s=e.sent,e.abrupt("return",s.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(r)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}},56:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(45);var r=n(3),a=n.n(r),s=n(7),c=n(151),o=n.n(c),i=n(53),l=function(){var e=null,t={setup:function(){return Object(s.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,i.a.get("setup-session");case 4:e=o()("",{reconnection:!1}),!0;case 6:case"end":return t.stop()}}),t)})))()},on:function(n,r){return Object(s.a)(a.a.mark((function s(){return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=3;break}return a.next=3,t.setup();case 3:e.on(n,r);case 4:case"end":return a.stop()}}),s)})))()},off:function(n){var r=arguments;return Object(s.a)(a.a.mark((function s(){var c;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c=r.length>1&&void 0!==r[1]?r[1]:null,e){a.next=4;break}return a.next=4,t.setup();case 4:c?e.off(n,c):e.removeAllListeners(n);case 5:case"end":return a.stop()}}),s)})))()},emit:function(n,r){return Object(s.a)(a.a.mark((function s(){return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=3;break}return a.next=3,t.setup();case 3:e.emit(n,r);case 4:case"end":return a.stop()}}),s)})))()},terminate:function(){e=null,!1}};return t}();window.socketService=l}},[[253,1,2]]]);
//# sourceMappingURL=main.d50acd41.chunk.js.map